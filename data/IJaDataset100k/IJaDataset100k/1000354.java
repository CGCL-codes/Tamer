#set( $symbol_pound = '#' )
#set( $symbol_dollar = '$' )
#set( $symbol_escape = '\' )
package ${package}.common.persistence;import java.util.logging.Level;import java.util.logging.Logger;import javax.persistence.EntityManagerFactory;import javax.persistence.Persistence;/** * * @author Dimitar Makariev */public class AppEngineEntityManagerFactory {    private static EntityManagerFactory emf;    private final String persistenceUnitName;    private final static Logger log = Logger.getLogger(AppEngineEntityManagerFactory.class.getName());    public AppEngineEntityManagerFactory(String persistenceUnitName) {                        this.persistenceUnitName = persistenceUnitName;    }    public EntityManagerFactory entityManagerFactory() {               log.warning(" accessing entityManagerFactory ");        try {            // assuming single threaded startup            long begin = System.currentTimeMillis();            if (emf == null) {                emf = Persistence.createEntityManagerFactory(this.persistenceUnitName);                log.warning("EntityManagerFactory ( singleton ) created for " + (System.currentTimeMillis() - begin) + "ms");            }            return emf;        } catch (RuntimeException e) {            log.log(Level.SEVERE,"Couldn't create EntityManagerFactory: " + e.getMessage(), e);            throw e;        } catch (Error e) {            log.log(Level.SEVERE,"Couldn't create EntityManagerFactory: " + e.getMessage(), e);            throw e;        }    }}