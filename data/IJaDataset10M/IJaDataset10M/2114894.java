package verisoft.GUI;

import javax.swing.JFrame;
import javax.swing.JOptionPane;
import org.jdesktop.application.SingleFrameApplication;
import verisoft.BE.*;
import verisoft.BL.*;

/**
 *
 * @author gginet
 */
public class FrmInicioSesion extends javax.swing.JDialog {

    /** Creates new form FrmInicioSesion */
    Usuario usrSession = null;

    public FrmInicioSesion(JFrame vnt) {
        super(vnt, true);
        initComponents();
        jLMensajeError.setVisible(false);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {
        jLUsuario = new javax.swing.JLabel();
        jLPassword = new javax.swing.JLabel();
        jTUsuario = new javax.swing.JTextField();
        jBIngresar = new javax.swing.JButton();
        jBSalir = new javax.swing.JButton();
        jPPassword = new javax.swing.JPasswordField();
        jLMensajeError = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();
        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(verisoft.GUI.VerisoftApp.class).getContext().getResourceMap(FrmInicioSesion.class);
        setTitle(resourceMap.getString("Form.title"));
        setIconImage(null);
        setIconImages(null);
        setName("Form");
        jLUsuario.setText(resourceMap.getString("jLUsuario.text"));
        jLUsuario.setName("jLUsuario");
        jLPassword.setText(resourceMap.getString("jLPassword.text"));
        jLPassword.setName("jLPassword");
        jTUsuario.setText(resourceMap.getString("jTUsuario.text"));
        jTUsuario.setName("jTUsuario");
        jBIngresar.setIcon(resourceMap.getIcon("jBIngresar.icon"));
        jBIngresar.setText(resourceMap.getString("jBIngresar.text"));
        jBIngresar.setName("jBIngresar");
        jBIngresar.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mouseClicked(java.awt.event.MouseEvent evt) {
                botonIngresar_click(evt);
            }
        });
        jBSalir.setIcon(resourceMap.getIcon("jBSalir.icon"));
        jBSalir.setText(resourceMap.getString("jBSalir.text"));
        jBSalir.setName("jBSalir");
        jBSalir.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mouseClicked(java.awt.event.MouseEvent evt) {
                botonSalir_Click(evt);
            }
        });
        jPPassword.setText(resourceMap.getString("jPPassword.text"));
        jPPassword.setName("jPPassword");
        jLMensajeError.setForeground(resourceMap.getColor("jLMensajeError.foreground"));
        jLMensajeError.setText(resourceMap.getString("jLMensajeError.text"));
        jLMensajeError.setName("jLMensajeError");
        jButton1.setIcon(resourceMap.getIcon("jButton1.icon"));
        jButton1.setText(resourceMap.getString("jButton1.text"));
        jButton1.setName("jButton1");
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addComponent(jButton1).addGap(83, 83, 83).addComponent(jLMensajeError)).addGroup(layout.createSequentialGroup().addGap(43, 43, 43).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING).addComponent(jLPassword).addComponent(jLUsuario)).addGap(47, 47, 47).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false).addComponent(jPPassword).addComponent(jTUsuario, javax.swing.GroupLayout.DEFAULT_SIZE, 264, Short.MAX_VALUE))).addGroup(layout.createSequentialGroup().addGap(62, 62, 62).addComponent(jBIngresar, javax.swing.GroupLayout.PREFERRED_SIZE, 111, javax.swing.GroupLayout.PREFERRED_SIZE).addGap(116, 116, 116).addComponent(jBSalir, javax.swing.GroupLayout.PREFERRED_SIZE, 104, javax.swing.GroupLayout.PREFERRED_SIZE))).addContainerGap(23, Short.MAX_VALUE)));
        layout.setVerticalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jButton1).addGroup(layout.createSequentialGroup().addGap(21, 21, 21).addComponent(jLMensajeError))).addGap(40, 40, 40).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE).addComponent(jLUsuario).addComponent(jTUsuario, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addGap(29, 29, 29).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE).addComponent(jLPassword).addComponent(jPPassword, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addGap(44, 44, 44).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING).addComponent(jBIngresar, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE).addComponent(jBSalir, javax.swing.GroupLayout.PREFERRED_SIZE, 29, javax.swing.GroupLayout.PREFERRED_SIZE)).addGap(25, 25, 25)));
        pack();
    }

    private void botonIngresar_click(java.awt.event.MouseEvent evt) {
        Usuario usr = new UsuarioBL().iniciarSesion(jTUsuario.getText(), jPPassword.getText());
        if (usr == null) {
            jLMensajeError.setVisible(true);
        } else {
            this.usrSession = usr;
            this.setVisible(false);
        }
    }

    public Usuario getUsuarioSesion() {
        return this.usrSession;
    }

    private void botonSalir_Click(java.awt.event.MouseEvent evt) {
        this.dispose();
    }

    private javax.swing.JButton jBIngresar;

    private javax.swing.JButton jBSalir;

    private javax.swing.JButton jButton1;

    private javax.swing.JLabel jLMensajeError;

    private javax.swing.JLabel jLPassword;

    private javax.swing.JLabel jLUsuario;

    private javax.swing.JPasswordField jPPassword;

    private javax.swing.JTextField jTUsuario;
}
