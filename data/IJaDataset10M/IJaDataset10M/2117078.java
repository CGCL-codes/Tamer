package alice.tucson.examples.tictactoe;

@SuppressWarnings("serial")
public class AgentGUI extends javax.swing.JFrame implements UserInterface {

    private javax.swing.JPanel jPanel1;

    private javax.swing.JButton buttonAdvice;

    private javax.swing.JPanel jPanel2;

    private javax.swing.JLabel place10;

    private javax.swing.JLabel place11;

    private javax.swing.JLabel place12;

    private javax.swing.JLabel place20;

    private javax.swing.JLabel place21;

    private javax.swing.JLabel place22;

    private javax.swing.JLabel place01;

    private javax.swing.JLabel place02;

    private javax.swing.JLabel place00;

    private javax.swing.JPanel jPanel3;

    private javax.swing.JTextField outputState;

    javax.swing.ImageIcon crossPawn = new javax.swing.ImageIcon(getClass().getResource("cross.GIF"));

    javax.swing.ImageIcon circlePawn = new javax.swing.ImageIcon(getClass().getResource("circle.GIF"));

    AgentPlayer player;

    javax.swing.JLabel[] labels = new javax.swing.JLabel[9];

    /** Creates new form AgentGUI */
    public AgentGUI(AgentPlayer player_) {
        initComponents();
        pack();
        player = player_;
        labels[0] = place00;
        labels[1] = place10;
        labels[2] = place20;
        labels[3] = place01;
        labels[4] = place11;
        labels[5] = place21;
        labels[6] = place02;
        labels[7] = place12;
        labels[8] = place22;
        setSize(200, 240);
        setVisible(true);
    }

    /**
	 * This method is called from within the constructor to initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is always
	 * regenerated by the FormEditor.
	 */
    private void initComponents() {
        jPanel1 = new javax.swing.JPanel();
        buttonAdvice = new javax.swing.JButton();
        jPanel2 = new javax.swing.JPanel();
        place10 = new javax.swing.JLabel();
        place11 = new javax.swing.JLabel();
        place12 = new javax.swing.JLabel();
        place20 = new javax.swing.JLabel();
        place21 = new javax.swing.JLabel();
        place22 = new javax.swing.JLabel();
        place01 = new javax.swing.JLabel();
        place02 = new javax.swing.JLabel();
        place00 = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        outputState = new javax.swing.JTextField();
        getContentPane().setLayout(new java.awt.GridBagLayout());
        java.awt.GridBagConstraints gridBagConstraints1;
        setTitle("tictactoe GUIAgent");
        setResizable(false);
        addWindowListener(new java.awt.event.WindowAdapter() {

            public void windowClosing(java.awt.event.WindowEvent evt) {
                exitForm(evt);
            }
        });
        jPanel1.setLayout(new java.awt.GridBagLayout());
        java.awt.GridBagConstraints gridBagConstraints2;
        buttonAdvice.setToolTipText("ask advice");
        buttonAdvice.setFont(new java.awt.Font("Arial", 0, 11));
        buttonAdvice.setText("ask advice");
        buttonAdvice.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonAdviceActionPerformed(evt);
            }
        });
        gridBagConstraints2 = new java.awt.GridBagConstraints();
        gridBagConstraints2.gridx = 0;
        gridBagConstraints2.gridy = 0;
        gridBagConstraints2.weightx = 1.0;
        gridBagConstraints2.weighty = 1.0;
        jPanel1.add(buttonAdvice, gridBagConstraints2);
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        gridBagConstraints1.gridx = 0;
        gridBagConstraints1.gridy = 0;
        gridBagConstraints1.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints1.weightx = 100.0;
        gridBagConstraints1.weighty = 10.0;
        getContentPane().add(jPanel1, gridBagConstraints1);
        jPanel2.setLayout(new java.awt.GridBagLayout());
        java.awt.GridBagConstraints gridBagConstraints3;
        place10.setPreferredSize(new java.awt.Dimension(50, 50));
        place10.setBorder(new javax.swing.border.LineBorder(java.awt.Color.black));
        place10.setName("place10");
        place10.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mousePressed(java.awt.event.MouseEvent evt) {
                placeMousePressed(evt);
            }
        });
        gridBagConstraints3 = new java.awt.GridBagConstraints();
        gridBagConstraints3.gridx = 0;
        gridBagConstraints3.gridy = 1;
        gridBagConstraints3.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints3.weightx = 1.0;
        gridBagConstraints3.weighty = 1.0;
        jPanel2.add(place10, gridBagConstraints3);
        place11.setPreferredSize(new java.awt.Dimension(50, 50));
        place11.setBorder(new javax.swing.border.LineBorder(java.awt.Color.black));
        place11.setName("place11");
        place11.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mousePressed(java.awt.event.MouseEvent evt) {
                placeMousePressed(evt);
            }
        });
        gridBagConstraints3 = new java.awt.GridBagConstraints();
        gridBagConstraints3.gridx = 1;
        gridBagConstraints3.gridy = 1;
        gridBagConstraints3.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints3.weightx = 1.0;
        gridBagConstraints3.weighty = 1.0;
        jPanel2.add(place11, gridBagConstraints3);
        place12.setPreferredSize(new java.awt.Dimension(50, 50));
        place12.setBorder(new javax.swing.border.LineBorder(java.awt.Color.black));
        place12.setName("place12");
        place12.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mousePressed(java.awt.event.MouseEvent evt) {
                placeMousePressed(evt);
            }
        });
        gridBagConstraints3 = new java.awt.GridBagConstraints();
        gridBagConstraints3.gridx = 2;
        gridBagConstraints3.gridy = 1;
        gridBagConstraints3.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints3.weightx = 1.0;
        gridBagConstraints3.weighty = 1.0;
        jPanel2.add(place12, gridBagConstraints3);
        place20.setPreferredSize(new java.awt.Dimension(50, 50));
        place20.setBorder(new javax.swing.border.LineBorder(java.awt.Color.black));
        place20.setName("place20");
        place20.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mousePressed(java.awt.event.MouseEvent evt) {
                placeMousePressed(evt);
            }
        });
        gridBagConstraints3 = new java.awt.GridBagConstraints();
        gridBagConstraints3.gridx = 0;
        gridBagConstraints3.gridy = 2;
        gridBagConstraints3.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints3.weightx = 1.0;
        gridBagConstraints3.weighty = 1.0;
        jPanel2.add(place20, gridBagConstraints3);
        place21.setPreferredSize(new java.awt.Dimension(50, 50));
        place21.setBorder(new javax.swing.border.LineBorder(java.awt.Color.black));
        place21.setName("place21");
        place21.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mousePressed(java.awt.event.MouseEvent evt) {
                placeMousePressed(evt);
            }
        });
        gridBagConstraints3 = new java.awt.GridBagConstraints();
        gridBagConstraints3.gridx = 1;
        gridBagConstraints3.gridy = 2;
        gridBagConstraints3.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints3.weightx = 1.0;
        gridBagConstraints3.weighty = 1.0;
        jPanel2.add(place21, gridBagConstraints3);
        place22.setPreferredSize(new java.awt.Dimension(50, 50));
        place22.setBorder(new javax.swing.border.LineBorder(java.awt.Color.black));
        place22.setName("place22");
        place22.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mousePressed(java.awt.event.MouseEvent evt) {
                placeMousePressed(evt);
            }
        });
        gridBagConstraints3 = new java.awt.GridBagConstraints();
        gridBagConstraints3.gridx = 2;
        gridBagConstraints3.gridy = 2;
        gridBagConstraints3.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints3.weightx = 1.0;
        gridBagConstraints3.weighty = 1.0;
        jPanel2.add(place22, gridBagConstraints3);
        place01.setPreferredSize(new java.awt.Dimension(50, 50));
        place01.setBorder(new javax.swing.border.LineBorder(java.awt.Color.black));
        place01.setName("place01");
        place01.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mousePressed(java.awt.event.MouseEvent evt) {
                placeMousePressed(evt);
            }
        });
        gridBagConstraints3 = new java.awt.GridBagConstraints();
        gridBagConstraints3.gridx = 1;
        gridBagConstraints3.gridy = 0;
        gridBagConstraints3.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints3.weightx = 1.0;
        gridBagConstraints3.weighty = 1.0;
        jPanel2.add(place01, gridBagConstraints3);
        place02.setPreferredSize(new java.awt.Dimension(50, 50));
        place02.setBorder(new javax.swing.border.LineBorder(java.awt.Color.black));
        place02.setName("place02");
        place02.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mousePressed(java.awt.event.MouseEvent evt) {
                placeMousePressed(evt);
            }
        });
        gridBagConstraints3 = new java.awt.GridBagConstraints();
        gridBagConstraints3.gridx = 2;
        gridBagConstraints3.gridy = 0;
        gridBagConstraints3.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints3.weightx = 1.0;
        gridBagConstraints3.weighty = 1.0;
        jPanel2.add(place02, gridBagConstraints3);
        place00.setPreferredSize(new java.awt.Dimension(50, 50));
        place00.setBorder(new javax.swing.border.LineBorder(java.awt.Color.black));
        place00.setName("place00");
        place00.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mousePressed(java.awt.event.MouseEvent evt) {
                placeMousePressed(evt);
            }
        });
        gridBagConstraints3 = new java.awt.GridBagConstraints();
        gridBagConstraints3.gridx = 0;
        gridBagConstraints3.gridy = 0;
        gridBagConstraints3.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints3.weightx = 1.0;
        gridBagConstraints3.weighty = 1.0;
        jPanel2.add(place00, gridBagConstraints3);
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        gridBagConstraints1.gridx = 0;
        gridBagConstraints1.gridy = 1;
        gridBagConstraints1.weightx = 100.0;
        gridBagConstraints1.weighty = 60.0;
        getContentPane().add(jPanel2, gridBagConstraints1);
        jPanel3.setLayout(new java.awt.GridBagLayout());
        java.awt.GridBagConstraints gridBagConstraints4;
        gridBagConstraints4 = new java.awt.GridBagConstraints();
        gridBagConstraints4.gridx = 0;
        gridBagConstraints4.gridy = 0;
        gridBagConstraints4.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints4.weightx = 1.0;
        gridBagConstraints4.weighty = 1.0;
        jPanel3.add(outputState, gridBagConstraints4);
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        gridBagConstraints1.gridx = 0;
        gridBagConstraints1.gridy = 2;
        gridBagConstraints1.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints1.weightx = 100.0;
        gridBagConstraints1.weighty = 30.0;
        getContentPane().add(jPanel3, gridBagConstraints1);
    }

    private void buttonAdviceActionPerformed(java.awt.event.ActionEvent evt) {
        try {
            player.onAskAdvice();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    private void placeMousePressed(java.awt.event.MouseEvent evt) {
        try {
            javax.swing.JLabel label = (javax.swing.JLabel) evt.getSource();
            String name = label.getName();
            int iy = Integer.parseInt(new Character(name.charAt(5)).toString());
            int ix = Integer.parseInt(new Character(name.charAt(6)).toString());
            player.onNewMove(ix, iy);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    /** Exit the Application */
    @SuppressWarnings("static-access")
    private void exitForm(java.awt.event.WindowEvent evt) {
        player.onLeave();
        try {
            Thread.currentThread().sleep(100);
        } catch (Exception ex) {
        }
        System.exit(0);
    }

    public void updateInfo(alice.logictuple.LogicTuple info, alice.logictuple.LogicTuple grid) {
        outputState.setText(info.toString());
        try {
            for (int i = 0; i < 9; i++) {
                alice.logictuple.TupleArgument t = grid.getArg(i);
                if (!t.isVar()) {
                    if (t.getName().equals("x")) {
                        labels[i].setIcon(crossPawn);
                        labels[i].setDisabledIcon(crossPawn);
                    } else {
                        labels[i].setIcon(circlePawn);
                        labels[i].setDisabledIcon(circlePawn);
                    }
                    labels[i].setEnabled(false);
                }
            }
        } catch (Exception ex) {
        }
    }
}
