package org.homedns.krolain.MochaJournal.Protocol;

import javax.swing.JProgressBar;
import org.homedns.krolain.util.InstallInfo;

/**
 *
 * @author  jsmith
 */
public class ProtProgress extends javax.swing.JDialog {

    JProgressBar m_Bar = null;

    java.lang.Thread m_TD = null;

    /** Creates new form ProtProgress */
    public ProtProgress(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        setDefaultCloseOperation(javax.swing.JDialog.DO_NOTHING_ON_CLOSE);
        initComponents();
        centerDialog();
        getRootPane().setWindowDecorationStyle(javax.swing.JRootPane.INFORMATION_DIALOG);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {
        javax.swing.JButton jCancelBtn;
        javax.swing.JLabel jLabel1;
        javax.swing.JPanel jPanel1;
        javax.swing.JPanel jPanel3;
        jPanel1 = new javax.swing.JPanel();
        jStep = new javax.swing.JProgressBar();
        jToolTip = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jProgress = new javax.swing.JProgressBar();
        jPanel3 = new javax.swing.JPanel();
        jCancelBtn = new javax.swing.JButton();
        getContentPane().setLayout(new java.awt.GridLayout(3, 1));
        setLocationRelativeTo(this);
        setResizable(false);
        setUndecorated(true);
        addComponentListener(new java.awt.event.ComponentAdapter() {

            public void componentShown(java.awt.event.ComponentEvent evt) {
                formComponentShown(evt);
            }
        });
        jPanel1.setLayout(new java.awt.BorderLayout());
        jStep.setMinimumSize(new java.awt.Dimension(100, 14));
        jStep.setPreferredSize(new java.awt.Dimension(250, 14));
        jPanel1.add(jStep, java.awt.BorderLayout.CENTER);
        jToolTip.setText(" ");
        jPanel1.add(jToolTip, java.awt.BorderLayout.NORTH);
        getContentPane().add(jPanel1);
        jPanel2.setLayout(new java.awt.BorderLayout());
        jLabel1.setText("Progress...");
        jPanel2.add(jLabel1, java.awt.BorderLayout.NORTH);
        jPanel2.add(jProgress, java.awt.BorderLayout.CENTER);
        getContentPane().add(jPanel2);
        jCancelBtn.setText(InstallInfo.getString("button.cancel"));
        jCancelBtn.setEnabled(false);
        jPanel3.add(jCancelBtn);
        getContentPane().add(jPanel3);
    }

    private void formComponentShown(java.awt.event.ComponentEvent evt) {
        m_TD.start();
    }

    /** Closes the dialog */
    public void reset(int min, int max, String szInitial, String szTitle, java.lang.Thread thread) {
        jStep.setMinimum(min);
        jStep.setMaximum(max);
        jStep.setValue(0);
        jToolTip.setText(szInitial);
        setTitle(szTitle);
        pack();
        validate();
        centerDialog();
        m_TD = thread;
    }

    private void centerDialog() {
        java.awt.Container parent = getParent();
        java.awt.Dimension dim = getSize();
        java.awt.Dimension dimParent = parent.getSize();
        java.awt.Point pntParent = parent.getLocation();
        setLocation((dimParent.width - dim.width) / 2 + pntParent.x, (dimParent.height - dim.height) / 2 + pntParent.y);
    }

    public int getStatus() {
        return jStep.getValue();
    }

    public void setBytesRead(int iBytes) {
        if (m_Bar != null) m_Bar.setMaximum(iBytes);
    }

    public void setByteProgressBar(JProgressBar bar) {
        if (bar != null) {
            jPanel2.remove(jProgress);
            jProgress = bar;
            jPanel2.add(jProgress, java.awt.BorderLayout.CENTER);
            pack();
            validate();
            centerDialog();
        }
    }

    public void update(int value, String szText) {
        jStep.setValue(value);
        jToolTip.setText(szText);
        jProgress.setValue(0);
    }

    private javax.swing.JPanel jPanel2;

    public javax.swing.JProgressBar jProgress;

    public javax.swing.JProgressBar jStep;

    public javax.swing.JLabel jToolTip;
}
