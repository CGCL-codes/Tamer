package edu.ucsd.ncmir.jinx.segmentation.manual.gui.cytoseg;

import edu.ucsd.ncmir.jinx.events.JxErrorEvent;
import edu.ucsd.ncmir.ontology.Ontology;
import edu.ucsd.ncmir.ontology.OntologyNode;
import edu.ucsd.ncmir.ontology.browser.OntologyBrowserPanel;
import edu.ucsd.ncmir.ontology.browser.OntologyListener;
import java.awt.Frame;
import javax.swing.JDialog;

/**
 *
 * @author spl
 */
public class JxCytosegOntologyNodeChooser extends JDialog implements OntologyListener {

    private Ontology _ontology;

    private OntologyNode _node;

    private OntologyBrowserPanel _obp = null;

    /** Creates new form JxCytosegOntologyNodeChooser */
    public JxCytosegOntologyNodeChooser(Frame parent, Ontology ontology, OntologyNode node) {
        super(parent, true);
        this._ontology = ontology;
        this._node = node;
        try {
            this._obp = new OntologyBrowserPanel(this._ontology, this._node);
            this._obp.addOntologyListener(this);
        } catch (InterruptedException ie) {
            new JxErrorEvent().send(ie);
        }
        this.initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {
        jPanel1 = new javax.swing.JPanel();
        jButton1 = new javax.swing.JButton();
        ontology_browser = this._obp;
        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        jPanel1.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.RIGHT));
        jButton1.setText("Accept");
        jButton1.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                accept(evt);
            }
        });
        jPanel1.add(jButton1);
        getContentPane().add(jPanel1, java.awt.BorderLayout.SOUTH);
        getContentPane().add(ontology_browser, java.awt.BorderLayout.CENTER);
        pack();
    }

    private boolean _accepted = false;

    private void accept(java.awt.event.ActionEvent evt) {
        this._accepted = true;
        this.setVisible(false);
        this.dispose();
    }

    boolean display() {
        this.setVisible(true);
        return this._accepted;
    }

    OntologyNode getNode() {
        return this._node;
    }

    private javax.swing.JButton jButton1;

    private javax.swing.JPanel jPanel1;

    private javax.swing.JPanel ontology_browser;

    public void nodeSelected(OntologyNode node) {
        this._node = node;
    }
}
