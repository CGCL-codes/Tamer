package hsqldbtests;

import java.sql.SQLException;
import junit.framework.TestCase;
import oracle.domain.crud.RealOrderAO;
import oracle.domain.custom.RealOrderDO;
import hsqldbtests.AutoGeneratedKeyTest;
import oracletests.SqlMapSingleton;
import org.apache.log4j.Logger;
import com.ibatis.sqlmap.client.SqlMapClient;

public class AutoGeneratedKeyTest extends TestCase {

    private static Logger logger = Logger.getLogger(AutoGeneratedKeyTest.class);

    private SqlMapClient sqlMap = SqlMapSingleton.getInstance().getSqlMap();

    public AutoGeneratedKeyTest(final String txt) {
        super(txt);
    }

    public void testGenKey() throws SQLException {
        logger.debug("test started.");
        RealOrderDO r = new RealOrderDO();
        r.setMyId(new Integer(123456));
        r.setName("Invoice 200-100");
        RealOrderAO.insert(this.sqlMap, r);
        Integer k1 = r.getMyId();
        r.setMyId(new Integer(123457));
        r.setName("Invoice 201-101");
        RealOrderAO.insert(this.sqlMap, r);
        logger.debug("test finished k1=" + k1 + " k2=" + r.getMyId());
    }
}
