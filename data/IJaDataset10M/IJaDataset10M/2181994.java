package net.sf.jcgm.core;

/**
 * Message generated by the CGM interpreter for unimplemented or unsupported features.
 * @author xphc (Philippe Cad√©)
 * @version $Id: Message.java 13 2009-12-18 11:26:52Z phica $
 */
public class Message {

    private final Severity severity;

    private final String message;

    private final int elementClass;

    private final int elementId;

    private final String commandDescription;

    enum Severity {

        INFO, UNSUPPORTED, UNIMPLEMENTED, FATAL
    }

    /**
	 * Builds a message
	 * 
	 * @param severity
	 *            The severity of the message
	 * @param elementClass
	 *            The corresponding element class
	 * @param elementCode
	 *            The corresponding element ID
	 * @param message
	 *            A message
	 * @param commandDescription
	 *            The command description (optional), typically the output of
	 *            the <code>toString()</code> method for the command
	 */
    public Message(Severity severity, int elementClass, int elementCode, String message, String commandDescription) {
        this.severity = severity;
        this.elementClass = elementClass;
        this.elementId = elementCode;
        this.message = message;
        this.commandDescription = commandDescription;
    }

    public final int getElementClass() {
        return elementClass;
    }

    public final int getElementCode() {
        return elementId;
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append(ElementClass.getElementClass(this.elementClass)).append(" ");
        sb.append(ElementClass.getElement(elementClass, elementId)).append(" ");
        sb.append(this.severity).append(" ").append(this.message);
        if (this.commandDescription != null) {
            sb.append(" {").append(this.commandDescription).append("}");
        }
        return sb.toString();
    }
}
