package jout.frames.main.subwindow;

import javax.swing.SpinnerModel;
import javax.swing.SpinnerNumberModel;
import jout.JBC.BC;
import jout.JBC.Opcode;
import jout.structure.CPTable;
import jout.structure.history.*;

/**
 *
 * @author shumi
 */
public class JPanel_Code_OpcodeArg_num extends javax.swing.JPanel {

    protected final subfrmSubWindow __subWin;

    protected boolean __initialized = false;

    protected int __val = 0;

    protected BC __code = BC.UNUSED;

    protected final ArgumentEditorDialog __arged;

    /** Creates new form JPanel_Code_OpcodeArg_num */
    public JPanel_Code_OpcodeArg_num(subfrmSubWindow subWin, ArgumentEditorDialog arged) {
        __initialized = false;
        __subWin = subWin;
        __arged = arged;
        initComponents();
        setData();
        __initialized = true;
    }

    public void setData(Opcode opcode) {
        __initialized = false;
        __code = opcode.getBC();
        byte[] args = opcode.getArgs();
        for (int i = 0; i < args.length; ++i) {
            __val <<= 8;
            __val += args[i] & 0x000000FF;
        }
        setData();
        __initialized = true;
    }

    public void setData() {
        CPTable cpt = __subWin.getCPT();
        SpinnerModel sm = null;
        jLabel_OpcodeL.setText(Opcode.getName(__code));
        if (__code == BC.BIPUSH) jSpinner_val.setModel(new SpinnerNumberModel(Byte.valueOf((byte) __val), null, null, Byte.valueOf((byte) 1))); else jSpinner_val.setModel(new SpinnerNumberModel(Short.valueOf((short) __val), null, null, Short.valueOf((short) 1)));
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {
        jLabel_Opcode = new javax.swing.JLabel();
        jLabel_OpcodeL = new javax.swing.JLabel();
        jLabel_val = new javax.swing.JLabel();
        jSpinner_val = new javax.swing.JSpinner();
        jLabel_Opcode.setText("Opcode:");
        jLabel_OpcodeL.setText("<Opcode>");
        jLabel_val.setText("Value:");
        jSpinner_val.setModel(new javax.swing.SpinnerNumberModel(Short.valueOf((short) 0), null, null, Short.valueOf((short) 1)));
        jSpinner_val.addChangeListener(new javax.swing.event.ChangeListener() {

            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jSpinner_valStateChanged(evt);
            }
        });
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addContainerGap().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false).addGroup(layout.createSequentialGroup().addComponent(jLabel_Opcode, javax.swing.GroupLayout.PREFERRED_SIZE, 82, javax.swing.GroupLayout.PREFERRED_SIZE).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED).addComponent(jLabel_OpcodeL, javax.swing.GroupLayout.PREFERRED_SIZE, 82, javax.swing.GroupLayout.PREFERRED_SIZE)).addGroup(layout.createSequentialGroup().addComponent(jLabel_val, javax.swing.GroupLayout.PREFERRED_SIZE, 82, javax.swing.GroupLayout.PREFERRED_SIZE).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED).addComponent(jSpinner_val))).addContainerGap(212, Short.MAX_VALUE)));
        layout.setVerticalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addContainerGap().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE).addComponent(jLabel_Opcode, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE).addComponent(jLabel_OpcodeL, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE).addComponent(jLabel_val, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE).addComponent(jSpinner_val, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addContainerGap(230, Short.MAX_VALUE)));
        layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] { jLabel_val, jSpinner_val });
    }

    private void jSpinner_valStateChanged(javax.swing.event.ChangeEvent evt) {
        if ((evt == null) || !__initialized) return;
        if (__code == BC.BIPUSH) __val = (Byte) jSpinner_val.getValue(); else __val = (Short) jSpinner_val.getValue();
        __arged.temp_opcode.setArgs(Opcode.int2args(__val, Opcode.code2arglen(__code, false)));
    }

    private javax.swing.JLabel jLabel_Opcode;

    private javax.swing.JLabel jLabel_OpcodeL;

    private javax.swing.JLabel jLabel_val;

    private javax.swing.JSpinner jSpinner_val;
}
