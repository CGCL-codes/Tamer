package rpr2_d18.arrayDataRepresentations;

import hla.rti1516e.encoding.HLAbyte;
import hla.rti1516e.exceptions.RTIinternalError;
import java.util.Iterator;
import java.util.ArrayList;
import hla.rti1516e.encoding.DataElement;
import hla.rti1516e.encoding.ByteWrapper;
import hla.rti1516e.exceptions.RTIinternalError;
import hla.rti1516e.encoding.DecoderException;
import hla.rti1516e.encoding.HLAfixedArray;
import rpr2_d18.fixedRecordRepresentations.RecordSetStruct;

/**
 * JAVADOC_COMMENTS
 * cardinality = Dynamic 
 * encoding   = HLAvariableArray
 * semantics  = -NULL- 
 * @author : auto generated by DRDC FOM Generator
 */
public class RecordSetList implements HLAfixedArray {

    ArrayList<RecordSetStruct> value = new ArrayList<RecordSetStruct>();

    /**
   * Constructor
   */
    public RecordSetList() throws RTIinternalError {
        value = new ArrayList<RecordSetStruct>();
        for (int i = 0; i < value.size(); i++) value.add(new RecordSetStruct());
    }

    /**
   * Get the data element at the index position
   * 
   * @param index : the position of the requested element
   */
    public RecordSetStruct get(int index) {
        return value.get(index);
    }

    /**
   * Add a data element at the index position
   * 
   * @param newElement : an instance of the data to add
   */
    public void addElement(DataElement newElement) {
        value.add((RecordSetStruct) newElement);
    }

    /**
   * Resize the variable array to a new length
   * 
   * @param newSize : the new size of the array
   */
    public void resize(int newSize) {
        ArrayList<RecordSetStruct> tempValue = value;
        value = new ArrayList<RecordSetStruct>(newSize);
        try {
            for (int i = 0; i < value.size(); i++) value.add(new RecordSetStruct());
        } catch (RTIinternalError e) {
            value = tempValue;
            e.printStackTrace();
        }
    }

    /**
   * Returns the size in bytes of this element's encoding.
   * 
   * @return : length in bytes
   */
    public int getEncodedLength() {
        int size = 0;
        for (int i = 0; i < value.size(); i++) size += value.get(i).getEncodedLength();
        return size;
    }

    /**
   * Returns the octet boundary of this element.
   *  
   * @return : octet boundary position
   */
    public int getOctetBoundary() {
        int size = 0;
        for (int i = 0; i < value.size(); i++) size += value.get(i).getEncodedLength();
        return size % 4;
    }

    /**
   * Encodes this element into the specified ByteWrapper.
   * 
   * @param byteWrapper : organized byte array containing native java value
   */
    public void encode(ByteWrapper byteWrapper) {
        for (int i = 0; i < value.size(); i++) value.get(i).encode(byteWrapper);
    }

    /**
   * Decodes this element from a ByteWrapper object
   * 
   * @param byteWrapper : organized array of bytes 
   */
    public void decode(ByteWrapper byteWrapper) throws DecoderException {
        for (int i = 0; i < value.size(); i++) value.get(i).decode(byteWrapper);
    }

    /**
   * Decodes this element from an array of bytes
   * 
   * @param bytes : array of bytes 
   */
    public void decode(byte[] bytes) throws DecoderException {
        for (int i = 0; i < value.size(); i++) value.get(i).decode(bytes);
    }

    /**
   * Returns this data value element
   * 
   * @return : native value type
   */
    public ArrayList<RecordSetStruct> getValue() {
        return value;
    }

    /**
   * Copies the value into an array of bytes
   * 
   * @return : array of bytes
   */
    public byte[] toByteArray() {
        byte[] result = new byte[getEncodedLength()];
        int pos = 0;
        for (int i = 0; i < value.size(); i++) {
            byte[] b = value.get(i).toByteArray();
            System.arraycopy(b, 0, result, pos, value.get(i).getEncodedLength());
        }
        return result;
    }

    /**
   * Set the value from a native java type
   * 
   * @param newValue : the value to set it to
   */
    public void setValue(ArrayList<RecordSetStruct> newValue) throws RTIinternalError {
        value = new ArrayList<RecordSetStruct>(newValue.size());
        for (int i = 0; i < value.size(); i++) value.add(newValue.get(i));
    }

    /**
   * Return an Iterator for this array
   */
    public Iterator iterator() {
        return value.iterator();
    }

    /**
   * Return the size of this array element
   */
    public int size() {
        return value.size();
    }
}
