package org.fao.waicent.kids.giews.service;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import javax.servlet.http.HttpServletRequest;
import org.fao.waicent.db.dbConnectionManager;
import org.fao.waicent.kids.server.kidsRequest;
import org.fao.waicent.kids.server.kidsResponse;
import org.fao.waicent.kids.server.kidsService;
import org.fao.waicent.kids.server.kidsServiceException;
import org.fao.waicent.kids.server.kidsSession;
import org.fao.waicent.util.Debug;
import org.w3c.dom.Document;
import org.w3c.dom.Element;

public class SaveCountryNote extends kidsService {

    private String new_note_url = null;

    private boolean isNewText = false;

    public SaveCountryNote() {
    }

    public SaveCountryNote(Document doc, Element ele) throws IOException {
        Debug.println("SaveCountryNote(Document doc, Element ele) START");
        load(doc, ele);
        Debug.println("SaveCountryNote(Document doc, Element ele) END");
    }

    public boolean execute(kidsRequest request, kidsResponse response) throws kidsServiceException {
        Debug.println("**** SaveCountryNote START*** ");
        boolean consumed = false;
        kidsSession session = request.getSession();
        HttpServletRequest req = session.getHttpServletRequest();
        String setting = req.getParameter("setting");
        String isNew = req.getParameter("isNew");
        if (isNew != null) {
            isNewText = (new Boolean(isNew)).booleanValue();
        }
        Debug.println("***** SaveCountryNote setting: " + setting);
        if (setting == null || setting == "") {
            String code = session.getMapContext().getSelectedMapCode();
            String ref_date = req.getParameter("year") + "-" + req.getParameter("month") + "-" + req.getParameter("day");
            new_note_url = "WEB-INF/projects/" + code + "/note" + ref_date + ".xml";
            setting = new_note_url;
            Debug.println(" setting null code: " + new_note_url);
        }
        String filePath = session.getGlobalHome() + setting;
        Debug.println("****** file_path: " + filePath);
        String note_text = req.getParameter("note_text");
        String overwrite = req.getParameter("overwrite");
        String draft = req.getParameter("draft");
        Debug.println("***** note_text: " + note_text);
        Debug.println("draft: " + draft);
        note_text = fixEntities(note_text);
        if (draft.equalsIgnoreCase("false")) {
            if (overwrite.equalsIgnoreCase("false")) {
                createCountryNote(session, setting, note_text, request, false);
            } else {
                Debug.println("[SaveCountryNote] Overwriting " + filePath);
                saveFile(filePath, note_text);
            }
        } else {
            createCountryNote(session, setting, note_text, request, true);
        }
        consumed = true;
        Debug.println("**** SaveCountryNote END*** ");
        return consumed;
    }

    public boolean undo(kidsRequest request, kidsResponse response) throws kidsServiceException {
        boolean consumed = false;
        return consumed;
    }

    private void saveFile(String fileName, String text) {
        try {
            BufferedWriter out = new BufferedWriter(new FileWriter(fileName));
            Debug.println("[SaveCountryNote] Saving file: " + fileName);
            out.write("<html>" + text + "</html>");
            out.close();
        } catch (IOException e) {
            Debug.println("[SaveCountryNote] Caught an exception trying to save the file: " + e.getMessage());
        }
    }

    private void createCountryNote(kidsSession session, String fileName, String text, kidsRequest request, boolean draft) {
        dbConnectionManager dbman = null;
        if (draft) {
            HttpServletRequest req = session.getHttpServletRequest();
            String setting = req.getParameter("setting");
            String draftFile = session.getGlobalHome() + "temp/temp.xml";
            saveFile(draftFile, text);
        } else {
            try {
                dbman = new dbConnectionManager(session.getConfiguration().getDBIni());
            } catch (IOException ioe) {
                Debug.println("[SaveCountryNote] IOException trying to connect to the DB: " + ioe.getMessage());
            }
            Connection con = null;
            try {
                con = dbman.popConnection();
                Calendar now = Calendar.getInstance();
                SimpleDateFormat formatter = new SimpleDateFormat("yyyyMMdd");
                String date = formatter.format(now.getTime());
                String newFileName = fileName.substring(0, fileName.lastIndexOf("/") + 1) + "note";
                String code = session.getMapCode();
                String SQL = "select Proj_ID from project where Proj_Code = '" + code + "'";
                PreparedStatement pstmt = con.prepareStatement(SQL);
                ResultSet rs = pstmt.executeQuery();
                String Proj_ID = null;
                if (rs.next()) {
                    Proj_ID = rs.getString(1);
                }
                String Notes_Category = "Early Warning";
                String Notes_Service = "GIEWS";
                String Notes_Status = "A";
                HttpServletRequest req = session.getHttpServletRequest();
                String Notes_Reference_Date = req.getParameter("year") + "-" + req.getParameter("month") + "-" + req.getParameter("day");
                formatter = new SimpleDateFormat("yyyy-MM-dd");
                String Notes_Creation_Date = formatter.format(now.getTime());
                newFileName = newFileName + Notes_Reference_Date + ".xml";
                String Notes_URL = newFileName;
                if (isNewText) {
                    Notes_URL = "/" + new_note_url;
                }
                Debug.println("[SaveCountryNote] Notes_URL: " + Notes_URL);
                SQL = "insert into notes (Proj_ID, Notes_Category, Notes_Service, Notes_Reference_Date, Notes_Creation_Date, Notes_URL, Notes_Status) values (" + Proj_ID + ", '" + Notes_Category + "', '" + Notes_Service + "', '" + Notes_Reference_Date + "', '" + Notes_Creation_Date + "', '" + Notes_URL + "', '" + Notes_Status + "')";
                pstmt = con.prepareStatement(SQL);
                int result = pstmt.executeUpdate();
                String fullFileName = session.getGlobalHome() + newFileName;
                if (isNewText) {
                    fullFileName = session.getGlobalHome() + new_note_url;
                }
                saveFile(fullFileName, text);
            } catch (Exception e) {
                Debug.println("[SaveCountryNote]Exception: " + e.getMessage());
            } finally {
                dbman.pushConnection(con);
            }
        }
    }

    public static String fixEntities(String text) {
        String t = text;
        t = t.replaceAll("&quot;", "&#x0022;");
        t = t.replaceAll("&amp;", "&#x0026;");
        t = t.replaceAll("&apos;", "&#x0027;");
        t = t.replaceAll("&lt;", "&#x003C;");
        t = t.replaceAll("&gt;", "&#x003E;");
        t = t.replaceAll("&ampet;", "&#x0026;");
        t = t.replaceAll("&apo;", "&#x0027;");
        t = t.replaceAll("&dot;", "&#x002E;");
        t = t.replaceAll("&ed;", "&#x003B;");
        t = t.replaceAll("&nbsp;", "&#x00A0;");
        t = t.replaceAll("&iexcl;", "&#x00A1;");
        t = t.replaceAll("&cent;", "&#x00A2;");
        t = t.replaceAll("&pound;", "&#x00A3;");
        t = t.replaceAll("&curren;", "&#x00A4;");
        t = t.replaceAll("&yen;", "&#x00A5;");
        t = t.replaceAll("&brvbar;", "&#x00A6;");
        t = t.replaceAll("&sect;", "&#x00A7;");
        t = t.replaceAll("&uml;", "&#x00A8;");
        t = t.replaceAll("&copy;", "&#x00A9;");
        t = t.replaceAll("&ordf;", "&#x00AA;");
        t = t.replaceAll("&laquo;", "&#x00AB;");
        t = t.replaceAll("&not;", "&#x00AC;");
        t = t.replaceAll("&shy;", "&#x00AD;");
        t = t.replaceAll("&reg;", "&#x00AE;");
        t = t.replaceAll("&macr;", "&#x00AF;");
        t = t.replaceAll("&deg;", "&#x00B0;");
        t = t.replaceAll("&plusmn;", "&#x00B1;");
        t = t.replaceAll("&sup2;", "&#x00B2;");
        t = t.replaceAll("&sup3;", "&#x00B3;");
        t = t.replaceAll("&acute;", "&#x00B4;");
        t = t.replaceAll("&micro;", "&#x00B5;");
        t = t.replaceAll("&para;", "&#x00B6;");
        t = t.replaceAll("&middot;", "&#x00B7;");
        t = t.replaceAll("&cedil;", "&#x00B8;");
        t = t.replaceAll("&sup1;", "&#x00B9;");
        t = t.replaceAll("&ordm;", "&#x00BA;");
        t = t.replaceAll("&raquo;", "&#x00BB;");
        t = t.replaceAll("&frac14;", "&#x00BC;");
        t = t.replaceAll("&frac12;", "&#x00BD;");
        t = t.replaceAll("&frac34;", "&#x00BE;");
        t = t.replaceAll("&iquest;", "&#x00BF;");
        t = t.replaceAll("&Agrave;", "&#x00C0;");
        t = t.replaceAll("&Aacute;", "&#x00C1;");
        t = t.replaceAll("&Acirc;", "&#x00C2;");
        t = t.replaceAll("&Atilde;", "&#x00C3;");
        t = t.replaceAll("&Auml;", "&#x00C4;");
        t = t.replaceAll("&Aring;", "&#x00C5;");
        t = t.replaceAll("&AElig;", "&#x00C6;");
        t = t.replaceAll("&Ccedil;", "&#x00C7;");
        t = t.replaceAll("&Egrave;", "&#x00C8;");
        t = t.replaceAll("&Eacute;", "&#x00C9;");
        t = t.replaceAll("&Ecirc;", "&#x00CA;");
        t = t.replaceAll("&Euml;", "&#x00CB;");
        t = t.replaceAll("&Igrave;", "&#x00CC;");
        t = t.replaceAll("&Iacute;", "&#x00CD;");
        t = t.replaceAll("&Icirc;", "&#x00CE;");
        t = t.replaceAll("&Iuml;", "&#x00CF;");
        t = t.replaceAll("&ETH;", "&#x00D0;");
        t = t.replaceAll("&Ntilde;", "&#x00D1;");
        t = t.replaceAll("&Ograve;", "&#x00D2;");
        t = t.replaceAll("&Oacute;", "&#x00D3;");
        t = t.replaceAll("&Ocirc;", "&#x00D4;");
        t = t.replaceAll("&Otilde;", "&#x00D5;");
        t = t.replaceAll("&Ouml;", "&#x00D6;");
        t = t.replaceAll("&times;", "&#x00D7;");
        t = t.replaceAll("&Oslash;", "&#x00D8;");
        t = t.replaceAll("&Ugrave;", "&#x00D9;");
        t = t.replaceAll("&Uacute;", "&#x00DA;");
        t = t.replaceAll("&Ucirc;", "&#x00DB;");
        t = t.replaceAll("&Uuml;", "&#x00DC;");
        t = t.replaceAll("&Yacute;", "&#x00DD;");
        t = t.replaceAll("&THORN;", "&#x00DE;");
        t = t.replaceAll("&szlig;", "&#x00DF;");
        t = t.replaceAll("&agrave;", "&#x00E0;");
        t = t.replaceAll("&aacute;", "&#x00E1;");
        t = t.replaceAll("&acirc;", "&#x00E2;");
        t = t.replaceAll("&atilde;", "&#x00E3;");
        t = t.replaceAll("&auml;", "&#x00E4;");
        t = t.replaceAll("&aring;", "&#x00E5;");
        t = t.replaceAll("&aelig;", "&#x00E6;");
        t = t.replaceAll("&ccedil;", "&#x00E7;");
        t = t.replaceAll("&egrave;", "&#x00E8;");
        t = t.replaceAll("&eacute;", "&#x00E9;");
        t = t.replaceAll("&ecirc;", "&#x00EA;");
        t = t.replaceAll("&euml;", "&#x00EB;");
        t = t.replaceAll("&igrave;", "&#x00EC;");
        t = t.replaceAll("&iacute;", "&#x00ED;");
        t = t.replaceAll("&icirc;", "&#x00EE;");
        t = t.replaceAll("&iuml;", "&#x00EF;");
        t = t.replaceAll("&eth;", "&#x00F0;");
        t = t.replaceAll("&ntilde;", "&#x00F1;");
        t = t.replaceAll("&ograve;", "&#x00F2;");
        t = t.replaceAll("&oacute;", "&#x00F3;");
        t = t.replaceAll("&ocirc;", "&#x00F4;");
        t = t.replaceAll("&otilde;", "&#x00F5;");
        t = t.replaceAll("&ouml;", "&#x00F6;");
        t = t.replaceAll("&divide;", "&#x00F7;");
        t = t.replaceAll("&oslash;", "&#x00F8;");
        t = t.replaceAll("&ugrave;", "&#x00F9;");
        t = t.replaceAll("&uacute;", "&#x00FA;");
        t = t.replaceAll("&ucirc;", "&#x00FB;");
        t = t.replaceAll("&uuml;", "&#x00FC;");
        t = t.replaceAll("&yacute;", "&#x00FD;");
        t = t.replaceAll("&thorn;", "&#x00FE;");
        t = t.replaceAll("&yuml;", "&#x00FF;");
        t = t.replaceAll("&Amacr;", "&#x0100;");
        t = t.replaceAll("&amacr;", "&#x0101;");
        t = t.replaceAll("&Abreve;", "&#x0102;");
        t = t.replaceAll("&abreve;", "&#x0103;");
        t = t.replaceAll("&Aogon;", "&#x0104;");
        t = t.replaceAll("&aogon;", "&#x0105;");
        t = t.replaceAll("&Cdot;", "&#x010A;");
        t = t.replaceAll("&cdot;", "&#x010B;");
        t = t.replaceAll("&Dstrok;", "&#x0110;");
        t = t.replaceAll("&dstrok;", "&#x0111;");
        t = t.replaceAll("&Emacr;", "&#x0112;");
        t = t.replaceAll("&emacr;", "&#x0113;");
        t = t.replaceAll("&Ebreve;", "&#x0114;");
        t = t.replaceAll("&ebreve;", "&#x0115;");
        t = t.replaceAll("&Edot;", "&#x0116;");
        t = t.replaceAll("&edot;", "&#x0117;");
        t = t.replaceAll("&Eogon;", "&#x0118;");
        t = t.replaceAll("&eogon;", "&#x0119;");
        t = t.replaceAll("&Gdot;", "&#x0120;");
        t = t.replaceAll("&gdot;", "&#x0121;");
        t = t.replaceAll("&hstrok;", "&#x0127;");
        t = t.replaceAll("&Imacr;", "&#x012A;");
        t = t.replaceAll("&imacr;", "&#x012B;");
        t = t.replaceAll("&Ibreve;", "&#x012C;");
        t = t.replaceAll("&ibreve;", "&#x012D;");
        t = t.replaceAll("&Iogon;", "&#x012E;");
        t = t.replaceAll("&iogon;", "&#x012F;");
        t = t.replaceAll("&inodot;", "&#x0131;");
        t = t.replaceAll("&IJlig;", "&#x0132;");
        t = t.replaceAll("&ijlig;", "&#x0133;");
        t = t.replaceAll("&ENG;", "&#x014A;");
        t = t.replaceAll("&eng;", "&#x014B;");
        t = t.replaceAll("&Omacr;", "&#x014C;");
        t = t.replaceAll("&omacr;", "&#x014D;");
        t = t.replaceAll("&Obreve;", "&#x014E;");
        t = t.replaceAll("&obreve;", "&#x014F;");
        t = t.replaceAll("&Odblac;", "&#x0150;");
        t = t.replaceAll("&odblac;", "&#x0151;");
        t = t.replaceAll("&OElig;", "&#x0152;");
        t = t.replaceAll("&oelig;", "&#x0153;");
        t = t.replaceAll("&Umacr;", "&#x016A;");
        t = t.replaceAll("&umacr;", "&#x016B;");
        t = t.replaceAll("&Ubreve;", "&#x016C;");
        t = t.replaceAll("&ubreve;", "&#x016D;");
        t = t.replaceAll("&Udblac;", "&#x0170;");
        t = t.replaceAll("&udblac;", "&#x0171;");
        t = t.replaceAll("&Uogon;", "&#x0172;");
        t = t.replaceAll("&uogon;", "&#x0173;");
        t = t.replaceAll("&Yuml;", "&#x0178;");
        t = t.replaceAll("&slong;", "&#x017F;");
        t = t.replaceAll("&bstrok;", "&#x0180;");
        t = t.replaceAll("&hwair;", "&#x0195;");
        t = t.replaceAll("&kslonglig;", "&#x0199;");
        t = t.replaceAll("&lbar;", "&#x019A;");
        t = t.replaceAll("&nlrleg;", "&#x019E;");
        t = t.replaceAll("&YR;", "&#x01A6;");
        t = t.replaceAll("&Zstrok;", "&#x01B5;");
        t = t.replaceAll("&zstrok;", "&#x01B6;");
        t = t.replaceAll("&EZH;", "&#x01B7;");
        t = t.replaceAll("&wynn;", "&#x01BF;");
        t = t.replaceAll("&AEligmacr;", "&#x01E2;");
        t = t.replaceAll("&aeligmacr;", "&#x01E3;");
        t = t.replaceAll("&Oogon;", "&#x01EA;");
        t = t.replaceAll("&oogon;", "&#x01EB;");
        t = t.replaceAll("&HWAIR;", "&#x01F6;");
        t = t.replaceAll("&WYNN;", "&#x01F7;");
        t = t.replaceAll("&AEligacute;", "&#x01FC;");
        t = t.replaceAll("&aeligacute;", "&#x01FD;");
        t = t.replaceAll("&Oslashacute;", "&#x01FE;");
        t = t.replaceAll("&oslashacute;", "&#x01FF;");
        t = t.replaceAll("&YOGH;", "&#x021C;");
        t = t.replaceAll("&yogh;", "&#x021D;");
        t = t.replaceAll("&Adot;", "&#x0226;");
        t = t.replaceAll("&adot;", "&#x0227;");
        t = t.replaceAll("&Odot;", "&#x022E;");
        t = t.replaceAll("&odot;", "&#x022F;");
        t = t.replaceAll("&Ymacr;", "&#x0232;");
        t = t.replaceAll("&ymacr;", "&#x0233;");
        t = t.replaceAll("&con;", "&#x0254;");
        t = t.replaceAll("&dtail;", "&#x0256;");
        t = t.replaceAll("&jnodotstrok;", "&#x025F;");
        t = t.replaceAll("&gscap;", "&#x0262;");
        t = t.replaceAll("&hslonglig;", "&#x0266;");
        t = t.replaceAll("&iscap;", "&#x026A;");
        t = t.replaceAll("&nscap;", "&#x0274;");
        t = t.replaceAll("&oeligscap;", "&#x0276;");
        t = t.replaceAll("&rdes;", "&#x027C;");
        t = t.replaceAll("&rscap;", "&#x0280;");
        t = t.replaceAll("&ubar;", "&#x0289;");
        t = t.replaceAll("&yscap;", "&#x028F;");
        t = t.replaceAll("&bscap;", "&#x0299;");
        t = t.replaceAll("&hscap;", "&#x029C;");
        t = t.replaceAll("&lscap;", "&#x029F;");
        t = t.replaceAll("&breve;", "&#x02D8;");
        t = t.replaceAll("&dot;", "&#x02D9;");
        t = t.replaceAll("&ring;", "&#x02DA;");
        t = t.replaceAll("&ogon;", "&#x02DB;");
        t = t.replaceAll("&tilde;", "&#x02DC;");
        t = t.replaceAll("&dblac;", "&#x02DD;");
        t = t.replaceAll("&combgrave;", "&#x0300;");
        t = t.replaceAll("&combacute;", "&#x0301;");
        t = t.replaceAll("&combcirc;", "&#x0302;");
        t = t.replaceAll("&combtilde;", "&#x0303;");
        t = t.replaceAll("&combmacr;", "&#x0304;");
        t = t.replaceAll("&combovl;", "&#x0305;");
        t = t.replaceAll("&bar;", "&#x0305;");
        t = t.replaceAll("&combbreve;", "&#x0306;");
        t = t.replaceAll("&combdot;", "&#x0307;");
        t = t.replaceAll("&combuml;", "&#x0308;");
        t = t.replaceAll("&combhook;", "&#x0309;");
        t = t.replaceAll("&combring;", "&#x030A;");
        t = t.replaceAll("&combdblac;", "&#x030B;");
        t = t.replaceAll("&combsgvertl;", "&#x030D;");
        t = t.replaceAll("&combdbvertl;", "&#x030E;");
        t = t.replaceAll("&combdotbl;", "&#x0323;");
        t = t.replaceAll("&combogon;", "&#x0328;");
        t = t.replaceAll("&barbl;", "&#x0332;");
        t = t.replaceAll("&baracr;", "&#x0336;");
        t = t.replaceAll("&asup;", "&#x0363;");
        t = t.replaceAll("&esup;", "&#x0364;");
        t = t.replaceAll("&isup;", "&#x0365;");
        t = t.replaceAll("&osup;", "&#x0366;");
        t = t.replaceAll("&usup;", "&#x0367;");
        t = t.replaceAll("&csup;", "&#x0368;");
        t = t.replaceAll("&dsup;", "&#x0369;");
        t = t.replaceAll("&hsup;", "&#x036A;");
        t = t.replaceAll("&msup;", "&#x036B;");
        t = t.replaceAll("&rsup;", "&#x036C;");
        t = t.replaceAll("&tsup;", "&#x036D;");
        t = t.replaceAll("&vsup;", "&#x036E;");
        t = t.replaceAll("&xsup;", "&#x036F;");
        t = t.replaceAll("&agr;", "&#x03B1;");
        t = t.replaceAll("&bgr;", "&#x03B2;");
        t = t.replaceAll("&ggr;", "&#x03B3;");
        t = t.replaceAll("&dgr;", "&#x03B4;");
        t = t.replaceAll("&egr;", "&#x03B5;");
        t = t.replaceAll("&zgr;", "&#x03B6;");
        t = t.replaceAll("&eegr;", "&#x03B7;");
        t = t.replaceAll("&thgr;", "&#x03B8;");
        t = t.replaceAll("&igr;", "&#x03B9;");
        t = t.replaceAll("&kgr;", "&#x03BA;");
        t = t.replaceAll("&lgr;", "&#x03BB;");
        t = t.replaceAll("&mgr;", "&#x03BC;");
        t = t.replaceAll("&ngr;", "&#x03BD;");
        t = t.replaceAll("&xgr;", "&#x03BE;");
        t = t.replaceAll("&ogr;", "&#x03BF;");
        t = t.replaceAll("&pgr;", "&#x03C0;");
        t = t.replaceAll("&rgr;", "&#x03C1;");
        t = t.replaceAll("&sfgr;", "&#x03C2;");
        t = t.replaceAll("&sgr;", "&#x03C3;");
        t = t.replaceAll("&tgr;", "&#x03C4;");
        t = t.replaceAll("&ugr;", "&#x03C5;");
        t = t.replaceAll("&phgr;", "&#x03C6;");
        t = t.replaceAll("&khgr;", "&#x03C7;");
        t = t.replaceAll("&psgr;", "&#x03C8;");
        t = t.replaceAll("&ohgr;", "&#x03C9;");
        t = t.replaceAll("&obiit;", "&#x03B8;");
        t = t.replaceAll("&tridotright;", "&#x10FB;");
        t = t.replaceAll("&frun;", "&#x16A0;");
        t = t.replaceAll("&mrun;", "&#x16D8;");
        t = t.replaceAll("&ascap;", "&#x1D00;");
        t = t.replaceAll("&aeligscap;", "&#x1D01;");
        t = t.replaceAll("&cscap;", "&#x1D04;");
        t = t.replaceAll("&dscap;", "&#x1D05;");
        t = t.replaceAll("&ethscap;", "&#x1D06;");
        t = t.replaceAll("&escap;", "&#x1D07;");
        t = t.replaceAll("&jscap;", "&#x1D0A;");
        t = t.replaceAll("&kscap;", "&#x1D0B;");
        t = t.replaceAll("&mscap;", "&#x1D0D;");
        t = t.replaceAll("&oscap;", "&#x1D0F;");
        t = t.replaceAll("&tscap;", "&#x1D1B;");
        t = t.replaceAll("&uscap;", "&#x1D1C;");
        t = t.replaceAll("&vscap;", "&#x1D20;");
        t = t.replaceAll("&wscap;", "&#x1D21;");
        t = t.replaceAll("&zscap;", "&#x1D22;");
        t = t.replaceAll("&Bdot;", "&#x1E02;");
        t = t.replaceAll("&bdot;", "&#x1E03;");
        t = t.replaceAll("&Bdotbl;", "&#x1E04;");
        t = t.replaceAll("&bdotbl;", "&#x1E05;");
        t = t.replaceAll("&Ddot;", "&#x1E0A;");
        t = t.replaceAll("&ddot;", "&#x1E0B;");
        t = t.replaceAll("&Ddotbl;", "&#x1E0C;");
        t = t.replaceAll("&ddotbl;", "&#x1E0D;");
        t = t.replaceAll("&Emacracute;", "&#x1E16;");
        t = t.replaceAll("&emacracute;", "&#x1E17;");
        t = t.replaceAll("&Fdot;", "&#x1E1E;");
        t = t.replaceAll("&fdot;", "&#x1E1F;");
        t = t.replaceAll("&Hdotbl;", "&#x1E24;");
        t = t.replaceAll("&hdotbl;", "&#x1E25;");
        t = t.replaceAll("&Kdotbl;", "&#x1E32;");
        t = t.replaceAll("&kdotbl;", "&#x1E33;");
        t = t.replaceAll("&Ldotbl;", "&#x1E36;");
        t = t.replaceAll("&ldotbl;", "&#x1E37;");
        t = t.replaceAll("&Mdot;", "&#x1E40;");
        t = t.replaceAll("&mdot;", "&#x1E41;");
        t = t.replaceAll("&Mdotbl;", "&#x1E42;");
        t = t.replaceAll("&mdotbl;", "&#x1E43;");
        t = t.replaceAll("&Ndotbl;", "&#x1E46;");
        t = t.replaceAll("&ndotbl;", "&#x1E47;");
        t = t.replaceAll("&Omacracute;", "&#x1E52;");
        t = t.replaceAll("&omacracute;", "&#x1E53;");
        t = t.replaceAll("&Pdot;", "&#x1E56;");
        t = t.replaceAll("&pdot;", "&#x1E57;");
        t = t.replaceAll("&Rdotbl;", "&#x1E5A;");
        t = t.replaceAll("&rdotbl;", "&#x1E5B;");
        t = t.replaceAll("&Sdot;", "&#x1E60;");
        t = t.replaceAll("&sdot;", "&#x1E61;");
        t = t.replaceAll("&Sdotbl;", "&#x1E62;");
        t = t.replaceAll("&sdotbl;", "&#x1E63;");
        t = t.replaceAll("&Tdot;", "&#x1E6A;");
        t = t.replaceAll("&tdot;", "&#x1E6B;");
        t = t.replaceAll("&Tdotbl;", "&#x1E6C;");
        t = t.replaceAll("&tdotbl;", "&#x1E6D;");
        t = t.replaceAll("&Vdotbl;", "&#x1E7E;");
        t = t.replaceAll("&vdotbl;", "&#x1E7F;");
        t = t.replaceAll("&Wacute;", "&#x1E82;");
        t = t.replaceAll("&wacute;", "&#x1E83;");
        t = t.replaceAll("&Wuml;", "&#x1E84;");
        t = t.replaceAll("&wuml;", "&#x1E85;");
        t = t.replaceAll("&Wdot;", "&#x1E86;");
        t = t.replaceAll("&wdot;", "&#x1E87;");
        t = t.replaceAll("&Wdotbl;", "&#x1E88;");
        t = t.replaceAll("&wdotbl;", "&#x1E89;");
        t = t.replaceAll("&Ydot;", "&#x1E8E;");
        t = t.replaceAll("&ydot;", "&#x1E8F;");
        t = t.replaceAll("&Zdotbl;", "&#x1E92;");
        t = t.replaceAll("&zdotbl;", "&#x1E93;");
        t = t.replaceAll("&Adotbl;", "&#x1EA0;");
        t = t.replaceAll("&adotbl;", "&#x1EA1;");
        t = t.replaceAll("&Ahook;", "&#x1EA2;");
        t = t.replaceAll("&ahook;", "&#x1EA3;");
        t = t.replaceAll("&Abreveacute;", "&#x1EAE;");
        t = t.replaceAll("&abreveacute;", "&#x1EAF;");
        t = t.replaceAll("&Edotbl;", "&#x1EB8;");
        t = t.replaceAll("&edotbl;", "&#x1EB9;");
        t = t.replaceAll("&Ihook;", "&#x1EC8;");
        t = t.replaceAll("&ihook;", "&#x1EC9;");
        t = t.replaceAll("&Idotbl;", "&#x1ECA;");
        t = t.replaceAll("&idotbl;", "&#x1ECB;");
        t = t.replaceAll("&Odotbl;", "&#x1ECC;");
        t = t.replaceAll("&odotbl;", "&#x1ECD;");
        t = t.replaceAll("&Ohook;", "&#x1ECE;");
        t = t.replaceAll("&ohook;", "&#x1ECF;");
        t = t.replaceAll("&Udotbl;", "&#x1EE4;");
        t = t.replaceAll("&udotbl;", "&#x1EE5;");
        t = t.replaceAll("&Uhook;", "&#x1EE6;");
        t = t.replaceAll("&uhook;", "&#x1EE7;");
        t = t.replaceAll("&Ydotbl;", "&#x1EF4;");
        t = t.replaceAll("&ydotbl;", "&#x1EF5;");
        t = t.replaceAll("&Yhook;", "&#x1EF6;");
        t = t.replaceAll("&yhook;", "&#x1EF7;");
        t = t.replaceAll("&enqd;", "&#x2000;");
        t = t.replaceAll("&emqd;", "&#x2001;");
        t = t.replaceAll("&ensp;", "&#x2002;");
        t = t.replaceAll("&emsp;", "&#x2003;");
        t = t.replaceAll("&emsp13;", "&#x2004;");
        t = t.replaceAll("&emsp14;", "&#x2005;");
        t = t.replaceAll("&emsp16;", "&#x2006;");
        t = t.replaceAll("&numsp;", "&#x2007;");
        t = t.replaceAll("&puncsp;", "&#x2008;");
        t = t.replaceAll("&thinsp;", "&#x2009;");
        t = t.replaceAll("&hairsp;", "&#x200A;");
        t = t.replaceAll("&zerosp;", "&#x200B;");
        t = t.replaceAll("&dash;", "&#x2010;");
        t = t.replaceAll("&nbhy;", "&#x2011;");
        t = t.replaceAll("&numdash;", "&#x2012;");
        t = t.replaceAll("&ndash;", "&#x2013;");
        t = t.replaceAll("&mdash;", "&#x2014;");
        t = t.replaceAll("&horbar;", "&#x2015;");
        t = t.replaceAll("&Verbar;", "&#x2016;");
        t = t.replaceAll("&lsquo;", "&#x2018;");
        t = t.replaceAll("&rsquo;", "&#x2019;");
        t = t.replaceAll("&lsquolow;", "&#x201A;");
        t = t.replaceAll("&rsquorev;", "&#x201B;");
        t = t.replaceAll("&ldquo;", "&#x201C;");
        t = t.replaceAll("&rdquo;", "&#x201D;");
        t = t.replaceAll("&ldquolow;", "&#x201E;");
        t = t.replaceAll("&rdquorev;", "&#x201F;");
        t = t.replaceAll("&dagger;", "&#x2020;");
        t = t.replaceAll("&Dagger;", "&#x2021;");
        t = t.replaceAll("&bull;", "&#x2022;");
        t = t.replaceAll("&tribull;", "&#x2023;");
        t = t.replaceAll("&sgldr;", "&#x2024;");
        t = t.replaceAll("&dblldr;", "&#x2025;");
        t = t.replaceAll("&hellip;", "&#x2026;");
        t = t.replaceAll("&hyphpoint;", "&#x2027;");
        t = t.replaceAll("&nnbsp;", "&#x202F;");
        t = t.replaceAll("&permil;", "&#x2030;");
        t = t.replaceAll("&prime;", "&#x2032;");
        t = t.replaceAll("&Prime;", "&#x2033;");
        t = t.replaceAll("&lsaquo;", "&#x2039;");
        t = t.replaceAll("&rsaquo;", "&#x203A;");
        t = t.replaceAll("&refmark;", "&#x203B;");
        t = t.replaceAll("&triast;", "&#x2042;");
        t = t.replaceAll("&fracsol;", "&#x2044;");
        t = t.replaceAll("&lsqbqu;", "&#x2045;");
        t = t.replaceAll("&rsqbqu;", "&#x2046;");
        t = t.replaceAll("&et;", "&#x204A;");
        t = t.replaceAll("&revpara;", "&#x204B;");
        t = t.replaceAll("&minus;", "&#x2212;");
        t = t.replaceAll("&there4;", "&#x2234;");
        t = t.replaceAll("&est;", "&#x223B;");
        t = t.replaceAll("&cross;", "&#x271D;");
        t = t.replaceAll("&lwhsqb;", "&#x27E6;");
        t = t.replaceAll("&rwhsqb;", "&#x27E7;");
        t = t.replaceAll("&langb;", "&#x27E8;");
        t = t.replaceAll("&rangb;", "&#x27E9;");
        t = t.replaceAll("&AAlig;", "&#xEF90;");
        t = t.replaceAll("&aalig;", "&#xEF91;");
        t = t.replaceAll("&AOlig;", "&#xEF92;");
        t = t.replaceAll("&aolig;", "&#xEF93;");
        t = t.replaceAll("&AUlig;", "&#xEF94;");
        t = t.replaceAll("&aulig;", "&#xEF95;");
        t = t.replaceAll("&AVlig;", "&#xEF96;");
        t = t.replaceAll("&avlig;", "&#xEF97;");
        t = t.replaceAll("&AVligslash;", "&#xEF98;");
        t = t.replaceAll("&avligslash;", "&#xEF99;");
        t = t.replaceAll("&AYlig;", "&#xEF9A;");
        t = t.replaceAll("&aylig;", "&#xEF9B;");
        t = t.replaceAll("&lbrk;", "&#xEF9C;");
        t = t.replaceAll("&fscap;", "&#xEF05;");
        t = t.replaceAll("&qscap;", "&#xEF0C;");
        t = t.replaceAll("&sscap;", "&#xEF0E;");
        t = t.replaceAll("&thscap;", "&#xEF15;");
        t = t.replaceAll("&xscap;", "&#xEF11;");
        t = t.replaceAll("&aenl;", "&#xEEE0;");
        t = t.replaceAll("&benl;", "&#xEEE1;");
        t = t.replaceAll("&cenl;", "&#xEEE2;");
        t = t.replaceAll("&denl;", "&#xEEE3;");
        t = t.replaceAll("&duncenl;", "&#xEEE4;");
        t = t.replaceAll("&ethenl;", "&#xEEE5;");
        t = t.replaceAll("&eenl;", "&#xEEE6;");
        t = t.replaceAll("&fenl;", "&#xEEE7;");
        t = t.replaceAll("&genl;", "&#xEEE8;");
        t = t.replaceAll("&henl;", "&#xEEE9;");
        t = t.replaceAll("&ienl;", "&#xEEEA;");
        t = t.replaceAll("&jenl;", "&#xEEEB;");
        t = t.replaceAll("&kenl;", "&#xEEEC;");
        t = t.replaceAll("&lenl;", "&#xEEED;");
        t = t.replaceAll("&menl;", "&#xEEEE;");
        t = t.replaceAll("&nenl;", "&#xEEEF;");
        t = t.replaceAll("&oenl;", "&#xEEF0;");
        t = t.replaceAll("&penl;", "&#xEEF1;");
        t = t.replaceAll("&qenl;", "&#xEEF2;");
        t = t.replaceAll("&renl;", "&#xEEF3;");
        t = t.replaceAll("&senl;", "&#xEEF4;");
        t = t.replaceAll("&tenl;", "&#xEEF5;");
        t = t.replaceAll("&thornenl;", "&#xEEF6;");
        t = t.replaceAll("&uenl;", "&#xEEF7;");
        t = t.replaceAll("&venl;", "&#xEEF8;");
        t = t.replaceAll("&wenl;", "&#xEEF9;");
        t = t.replaceAll("&xenl;", "&#xEEFA;");
        t = t.replaceAll("&yenl;", "&#xEEFB;");
        t = t.replaceAll("&zenl;", "&#xEEFC;");
        t = t.replaceAll("&condes;", "&#xF156;");
        t = t.replaceAll("&ET;", "&#xF142;");
        t = t.replaceAll("&etslash;", "&#xF158;");
        t = t.replaceAll("&rum;", "&#xF154;");
        t = t.replaceAll("&de;", "&#xF159;");
        t = t.replaceAll("&is;", "&#xF15A;");
        t = t.replaceAll("&etfin;", "&#xF155;");
        t = t.replaceAll("&thornslonglig;", "&#xE734;");
        t = t.replaceAll("&hslongligbar;", "&#xE7C7;");
        t = t.replaceAll("&kslongligbar;", "&#xE7C8;");
        t = t.replaceAll("&thornslongligbar;", "&#xE735;");
        t = t.replaceAll("&kbar;", "&#xE7C5;");
        t = t.replaceAll("&thornbar;", "&#xE73B;");
        t = t.replaceAll("&slongbar;", "&#xE7FF;");
        t = t.replaceAll("&Pbardes;", "&#xE270;");
        t = t.replaceAll("&pbardes;", "&#xE670;");
        t = t.replaceAll("&qbardes;", "&#xE68A;");
        t = t.replaceAll("&thornbardes;", "&#xE7A0;");
        t = t.replaceAll("&Pflour;", "&#xE27D;");
        t = t.replaceAll("&pflour;", "&#xE67D;");
        t = t.replaceAll("&arbar;", "&#xF1C0;");
        t = t.replaceAll("&er;", "&#xF152;");
        t = t.replaceAll("&ra;", "&#xF157;");
        t = t.replaceAll("&rabar;", "&#xF1C1;");
        t = t.replaceAll("&ur2;", "&#xF153;");
        t = t.replaceAll("&ur8;", "&#xF1C2;");
        t = t.replaceAll("&ur8open;", "&#xF1C3;");
        t = t.replaceAll("&ussep;", "&#xF151;");
        t = t.replaceAll("&us;", "&#xF15B;");
        t = t.replaceAll("&combcircdbl;", "&#xF163;");
        t = t.replaceAll("&combcurl;", "&#xF1C4;");
        t = t.replaceAll("&combcurlhigh;", "&#xF1C5;");
        t = t.replaceAll("&combflour;", "&#xF1C6;");
        t = t.replaceAll("&aeligsup;", "&#xF011;");
        t = t.replaceAll("&bsup;", "&#xF012;");
        t = t.replaceAll("&bscapsup;", "&#xF013;");
        t = t.replaceAll("&ethsup;", "&#xF014;");
        t = t.replaceAll("&dscapsup;", "&#xF016;");
        t = t.replaceAll("&fsup;", "&#xF017;");
        t = t.replaceAll("&gsup;", "&#xF018;");
        t = t.replaceAll("&gscapsup;", "&#xF019;");
        t = t.replaceAll("&ksup;", "&#xF01B;");
        t = t.replaceAll("&kscapsup;", "&#xF01C;");
        t = t.replaceAll("&lsup;", "&#xF01D;");
        t = t.replaceAll("&lscapsup;", "&#xF01E;");
        t = t.replaceAll("&mscapsup;", "&#xF020;");
        t = t.replaceAll("&nsup;", "&#xF021;");
        t = t.replaceAll("&nscapsup;", "&#xF023;");
        t = t.replaceAll("&psup;", "&#xF025;");
        t = t.replaceAll("&rscapsup;", "&#xF026;");
        t = t.replaceAll("&ssup;", "&#xF027;");
        t = t.replaceAll("&slongsup;", "&#xF028;");
        t = t.replaceAll("&tscapsup;", "&#xF02A;");
        t = t.replaceAll("&ysup;", "&#xF02B;");
        t = t.replaceAll("&zsup;", "&#xF02C;");
        t = t.replaceAll("&punctinter;", "&#xF160;");
        t = t.replaceAll("&punctelev;", "&#xF161;");
        t = t.replaceAll("&punctelevdiag;", "&#xF1F0;");
        t = t.replaceAll("&quest8;", "&#xF1F1;");
        t = t.replaceAll("&diacom;", "&#xF1F2;");
        t = t.replaceAll("&brevdot;", "&#xF1F3;");
        t = t.replaceAll("&luhsqb;", "&#xF1D2;");
        t = t.replaceAll("&ruhsqb;", "&#xF1D3;");
        t = t.replaceAll("&llhsqb;", "&#xF1D4;");
        t = t.replaceAll("&rlhsqb;", "&#xF1D5;");
        t = t.replaceAll("&luslst;", "&#xF16E;");
        t = t.replaceAll("&ruslst;", "&#xF16F;");
        t = t.replaceAll("&llslst;", "&#xF1D6;");
        t = t.replaceAll("&rlslst;", "&#xF1D7;");
        t = t.replaceAll("&anc;", "&#xF70A;");
        t = t.replaceAll("&ancacute;", "&#xF70B;");
        t = t.replaceAll("&ancdblac;", "&#xF719;");
        t = t.replaceAll("&ancgrave;", "&#xF70C;");
        t = t.replaceAll("&ancdblgrave;", "&#xF71A;");
        t = t.replaceAll("&brev;", "&#xF701;");
        t = t.replaceAll("&brevacute;", "&#xF706;");
        t = t.replaceAll("&brevdblac;", "&#xF717;");
        t = t.replaceAll("&brevgrave;", "&#xF707;");
        t = t.replaceAll("&brevdblgrave;", "&#xF718;");
        t = t.replaceAll("&mac;", "&#xF700;");
        t = t.replaceAll("&macacute;", "&#xF704;");
        t = t.replaceAll("&macdblac;", "&#xF715;");
        t = t.replaceAll("&macgrave;", "&#xF705;");
        t = t.replaceAll("&macdblgrave;", "&#xF716;");
        t = t.replaceAll("&macbrev;", "&#xF702;");
        t = t.replaceAll("&brevmac;", "&#xF703;");
        t = t.replaceAll("&macbrevacute;", "&#xF708;");
        t = t.replaceAll("&macbrevgrave;", "&#xF709;");
        t = t.replaceAll("&dblbrevmacacute;", "&#xF71B;");
        t = t.replaceAll("&dblbrevmacdblac;", "&#xF71C;");
        t = t.replaceAll("&metrpause;", "&#xF714;");
        t = t.replaceAll("&combdblbrevbl;", "&#xF743;");
        t = t.replaceAll("&macrhigh;", "&#xF00A;");
        t = t.replaceAll("&macrmed;", "&#xF00B;");
        t = t.replaceAll("&ovlhigh;", "&#xF00C;");
        t = t.replaceAll("&ovlmed;", "&#xF00D;");
        t = t.replaceAll("&bovlmed;", "&#xE44D;");
        t = t.replaceAll("&dovlmed;", "&#xE491;");
        t = t.replaceAll("&hovlmed;", "&#xE517;");
        t = t.replaceAll("&kovlmed;", "&#xE7C3;");
        t = t.replaceAll("&lstrok;", "&#xe5B0;");
        t = t.replaceAll("&lovlmed;", "&#xE5B1;");
        t = t.replaceAll("&slongovlmed;", "&#xE79E;");
        t = t.replaceAll("&thornovlmed;", "&#xE7A2;");
        t = t.replaceAll("&Iovlhigh;", "&#xE150;");
        t = t.replaceAll("&iovlmed;", "&#xE550;");
        t = t.replaceAll("&Jmacrhigh;", "&#xE154;");
        t = t.replaceAll("&Jovlhigh;", "&#xE152;");
        t = t.replaceAll("&jmacrmed;", "&#xE554;");
        t = t.replaceAll("&jovlmed;", "&#xE552;");
        t = t.replaceAll("&lmacrhigh;", "&#xE596;");
        t = t.replaceAll("&lovlhigh;", "&#xE58C;");
        t = t.replaceAll("&Mmacrhigh;", "&#xE1B8;");
        t = t.replaceAll("&Movlhigh;", "&#xE1D2;");
        t = t.replaceAll("&mmacrmed;", "&#xE5B8;");
        t = t.replaceAll("&movlmed;", "&#xE5D2;");
        t = t.replaceAll("&AAligacute;", "&#xEFE0;");
        t = t.replaceAll("&aaligacute;", "&#xEFE1;");
        t = t.replaceAll("&AOligacute;", "&#xEFE2;");
        t = t.replaceAll("&aoligacute;", "&#xEFE3;");
        t = t.replaceAll("&AUligacute;", "&#xEFE4;");
        t = t.replaceAll("&auligacute;", "&#xEFE5;");
        t = t.replaceAll("&AVligacute;", "&#xEFE6;");
        t = t.replaceAll("&avligacute;", "&#xEFE7;");
        t = t.replaceAll("&Eogonacute;", "&#xE099;");
        t = t.replaceAll("&eogonacute;", "&#xE499;");
        t = t.replaceAll("&Jacute;", "&#xE153;");
        t = t.replaceAll("&jacute;", "&#xE553;");
        t = t.replaceAll("&Oogonacute;", "&#xE20C;");
        t = t.replaceAll("&oogonacute;", "&#xE60C;");
        t = t.replaceAll("&Oslashogonacute;", "&#xE257;");
        t = t.replaceAll("&oslashogonacute;", "&#xE657;");
        t = t.replaceAll("&OOligacute;", "&#xEFE8;");
        t = t.replaceAll("&ooligacute;", "&#xEFE9;");
        t = t.replaceAll("&Vacute;", "&#xE33A;");
        t = t.replaceAll("&vacute;", "&#xE73A;");
        t = t.replaceAll("&Adblac;", "&#xE025;");
        t = t.replaceAll("&adblac;", "&#xE425;");
        t = t.replaceAll("&AAligdblac;", "&#xEFEA;");
        t = t.replaceAll("&aaligdblac;", "&#xEFEB;");
        t = t.replaceAll("&AEligdblac;", "&#xE041;");
        t = t.replaceAll("&aeligdblac;", "&#xE441;");
        t = t.replaceAll("&Edblac;", "&#xE0D1;");
        t = t.replaceAll("&edblac;", "&#xE4D1;");
        t = t.replaceAll("&Idblac;", "&#xE143;");
        t = t.replaceAll("&idblac;", "&#xE543;");
        t = t.replaceAll("&Jdblac;", "&#xE162;");
        t = t.replaceAll("&jdblac;", "&#xE562;");
        t = t.replaceAll("&OOligdblac;", "&#xEFEC;");
        t = t.replaceAll("&ooligdblac;", "&#xEFED;");
        t = t.replaceAll("&Vdblac;", "&#xE34B;");
        t = t.replaceAll("&vdblac;", "&#xE74B;");
        t = t.replaceAll("&Ydblac;", "&#xE37C;");
        t = t.replaceAll("&ydblac;", "&#xE77C;");
        t = t.replaceAll("&ydotacute;", "&#xE384;");
        t = t.replaceAll("&Ydotacute;", "&#xE784;");
        t = t.replaceAll("&AAligdot;", "&#xEFEE;");
        t = t.replaceAll("&aaligdot;", "&#xEFEF;");
        t = t.replaceAll("&AYligdot;", "&#xEFF0;");
        t = t.replaceAll("&ayligdot;", "&#xEFF1;");
        t = t.replaceAll("&gscapdot;", "&#xEF20;");
        t = t.replaceAll("&kdot;", "&#xE568;");
        t = t.replaceAll("&nscapdot;", "&#xEF21;");
        t = t.replaceAll("&rscapdot;", "&#xEF22;");
        t = t.replaceAll("&sscapdot;", "&#xEF23;");
        t = t.replaceAll("&tscapdot;", "&#xEF24;");
        t = t.replaceAll("&Vdot;", "&#xE34C;");
        t = t.replaceAll("&vdot;", "&#xE74C;");
        t = t.replaceAll("&Vinsdot;", "&#xE3E7;");
        t = t.replaceAll("&vinsdot;", "&#xE7E7;");
        t = t.replaceAll("&AAligdotbl;", "&#xEFF2;");
        t = t.replaceAll("&aaligdotbl;", "&#xEFF3;");
        t = t.replaceAll("&AOligdotbl;", "&#xEFF4;");
        t = t.replaceAll("&aoligdotbl;", "&#xEFF5;");
        t = t.replaceAll("&AUligdotbl;", "&#xEFF6;");
        t = t.replaceAll("&auligdotbl;", "&#xEFF7;");
        t = t.replaceAll("&AVligdotbl;", "&#xEFF8;");
        t = t.replaceAll("&avligdotbl;", "&#xEFF9;");
        t = t.replaceAll("&AYligdotbl;", "&#xEFFA;");
        t = t.replaceAll("&ayligdotbl;", "&#xEFFB;");
        t = t.replaceAll("&bscapdotbl;", "&#xEF25;");
        t = t.replaceAll("&Cdotbl;", "&#xE066;");
        t = t.replaceAll("&cdotbl;", "&#xE466;");
        t = t.replaceAll("&dscapdotbl;", "&#xEF26;");
        t = t.replaceAll("&ETHdotbl;", "&#xE08F;");
        t = t.replaceAll("&ethdotbl;", "&#xE48F;");
        t = t.replaceAll("&Eogondotbl;", "&#xE0E8;");
        t = t.replaceAll("&eogondotbl;", "&#xE4E8;");
        t = t.replaceAll("&Fdotbl;", "&#xE0EE;");
        t = t.replaceAll("&fdotbl;", "&#xE4EE;");
        t = t.replaceAll("&Finsdotbl;", "&#xE3E5;");
        t = t.replaceAll("&finsdotbl;", "&#xE7E5;");
        t = t.replaceAll("&Gdotbl;", "&#xE101;");
        t = t.replaceAll("&gdotbl;", "&#xE501;");
        t = t.replaceAll("&gscapdotbl;", "&#xEF27;");
        t = t.replaceAll("&Jdotbl;", "&#xE151;");
        t = t.replaceAll("&jdotbl;", "&#xE551;");
        t = t.replaceAll("&lscapdotbl;", "&#xEF28;");
        t = t.replaceAll("&mscapdotbl;", "&#xEF29;");
        t = t.replaceAll("&nscapdotbl;", "&#xEF2A;");
        t = t.replaceAll("&Oogondotbl;", "&#xE208;");
        t = t.replaceAll("&oogondotbl;", "&#xE608;");
        t = t.replaceAll("&OOligdotbl;", "&#xEFFC;");
        t = t.replaceAll("&ooligdotbl;", "&#xEFFD;");
        t = t.replaceAll("&Pdotbl;", "&#xE26D;");
        t = t.replaceAll("&pdotbl;", "&#xE66D;");
        t = t.replaceAll("&Qdotbl;", "&#xE288;");
        t = t.replaceAll("&qdotbl;", "&#xE688;");
        t = t.replaceAll("&rscapdotbl;", "&#xEF2B;");
        t = t.replaceAll("&rrotdotbl;", "&#xE7C1;");
        t = t.replaceAll("&sscapdotbl;", "&#xEF2C;");
        t = t.replaceAll("&slongdotbl;", "&#xE7C2;");
        t = t.replaceAll("&tscapdotbl;", "&#xEF2D;");
        t = t.replaceAll("&THORNdotbl;", "&#xE39F;");
        t = t.replaceAll("&thorndotbl;", "&#xE79F;");
        t = t.replaceAll("&Vinsdotbl;", "&#xE3E6;");
        t = t.replaceAll("&vinsdotbl;", "&#xE7E6;");
        t = t.replaceAll("&AAliguml;", "&#xEFFE;");
        t = t.replaceAll("&aaliguml;", "&#xEFFF;");
        t = t.replaceAll("&AEliguml;", "&#xE042;");
        t = t.replaceAll("&aeliguml;", "&#xE442;");
        t = t.replaceAll("&Acurl;", "&#xE033;");
        t = t.replaceAll("&acurl;", "&#xE433;");
        t = t.replaceAll("&Ecurl;", "&#xE0E9;");
        t = t.replaceAll("&ecurl;", "&#xE4E9;");
        t = t.replaceAll("&Icurl;", "&#xE12A;");
        t = t.replaceAll("&icurl;", "&#xE52A;");
        t = t.replaceAll("&Jcurl;", "&#xE163;");
        t = t.replaceAll("&jcurl;", "&#xE563;");
        t = t.replaceAll("&Ocurl;", "&#xE3D3;");
        t = t.replaceAll("&ocurl;", "&#xE7D3;");
        t = t.replaceAll("&Oslashcurl;", "&#xE3D4;");
        t = t.replaceAll("&oslashcurl;", "&#xE7D4;");
        t = t.replaceAll("&Ucurl;", "&#xE331;");
        t = t.replaceAll("&ucurl;", "&#xE731;");
        t = t.replaceAll("&Ycurl;", "&#xE385;");
        t = t.replaceAll("&ycurl;", "&#xE785;");
        t = t.replaceAll("&AEligogon;", "&#xE040;");
        t = t.replaceAll("&aeligogon;", "&#xE440;");
        t = t.replaceAll("&Oogoncurl;", "&#xE24F;");
        t = t.replaceAll("&oogoncurl;", "&#xE64F;");
        t = t.replaceAll("&Oslashogon;", "&#xE255;");
        t = t.replaceAll("&oslashogon;", "&#xE655;");
        t = t.replaceAll("&togon;", "&#xE6EE;");
        t = t.replaceAll("&AEligbreve;", "&#xE03F;");
        t = t.replaceAll("&aeligbreve;", "&#xE43F;");
        t = t.replaceAll("&Ybreve;", "&#xE376;");
        t = t.replaceAll("&ybreve;", "&#xE776;");
        t = t.replaceAll("&Amacrbreve;", "&#xE010;");
        t = t.replaceAll("&amacrbreve;", "&#xE410;");
        t = t.replaceAll("&AEligmacrbreve;", "&#xE03D;");
        t = t.replaceAll("&aeligmacrbreve;", "&#xE43D;");
        t = t.replaceAll("&Emacrbreve;", "&#xE0B7;");
        t = t.replaceAll("&emacrbreve;", "&#xE4B7;");
        t = t.replaceAll("&Imacrbreve;", "&#xE137;");
        t = t.replaceAll("&imacrbreve;", "&#xE537;");
        t = t.replaceAll("&Omacrbreve;", "&#xE21B;");
        t = t.replaceAll("&omacrbreve;", "&#xE61B;");
        t = t.replaceAll("&Umacrbreve;", "&#xE30B;");
        t = t.replaceAll("&umacrbreve;", "&#xE70B;");
        t = t.replaceAll("&Ymacrbreve;", "&#xE375;");
        t = t.replaceAll("&ymacrbreve;", "&#xE775;");
        t = t.replaceAll("&Amacracute;", "&#xE00A;");
        t = t.replaceAll("&amacracute;", "&#xE40A;");
        t = t.replaceAll("&AEligmacracute;", "&#xE03A;");
        t = t.replaceAll("&aeligmacracute;", "&#xE43A;");
        t = t.replaceAll("&Imacracute;", "&#xE135;");
        t = t.replaceAll("&imacracute;", "&#xE535;");
        t = t.replaceAll("&Umacracute;", "&#xE309;");
        t = t.replaceAll("&umacracute;", "&#xE709;");
        t = t.replaceAll("&Ymacracute;", "&#xE373;");
        t = t.replaceAll("&ymacracute;", "&#xE773;");
        t = t.replaceAll("&ains;", "&#xF200;");
        t = t.replaceAll("&ainsenl;", "&#xF201;");
        t = t.replaceAll("&aopen;", "&#xF202;");
        t = t.replaceAll("&aclose;", "&#xF203;");
        t = t.replaceAll("&aeligred;", "&#xF204;");
        t = t.replaceAll("&AOligred;", "&#xF205;");
        t = t.replaceAll("&aoligred;", "&#xF206;");
        t = t.replaceAll("&dunc;", "&#xF109;");
        t = t.replaceAll("&eunc;", "&#xF10A;");
        t = t.replaceAll("&Fins;", "&#xf10C;");
        t = t.replaceAll("&fins;", "&#xf10D;");
        t = t.replaceAll("&finsclose;", "&#xF207;");
        t = t.replaceAll("&Hins;", "&#xF110;");
        t = t.replaceAll("&jnodot;", "&#xE55C;");
        t = t.replaceAll("&kunc;", "&#xF208;");
        t = t.replaceAll("&kclose;", "&#xF209;");
        t = t.replaceAll("&munc;", "&#xF11A;");
        t = t.replaceAll("&OOlig;", "&#xF20A;");
        t = t.replaceAll("&oolig;", "&#xF20B;");
        t = t.replaceAll("&OEligred;", "&#xF20C;");
        t = t.replaceAll("&oeligred;", "&#xF20D;");
        t = t.replaceAll("&rrot;", "&#xF20E;");
        t = t.replaceAll("&rins;", "&#xF125;");
        t = t.replaceAll("&slongdes;", "&#xF127;");
        t = t.replaceAll("&tunc;", "&#xF129;");
        t = t.replaceAll("&Vins;", "&#xF210;");
        t = t.replaceAll("&vins;", "&#xF211;");
        t = t.replaceAll("&YYlig;", "&#xF212;");
        t = t.replaceAll("&yylig;", "&#xF213;");
        t = t.replaceAll("&Asqu;", "&#xF13A;");
        t = t.replaceAll("&Csqu;", "&#xF106;");
        t = t.replaceAll("&Gsqu;", "&#xF10E;");
        t = t.replaceAll("&Gins;", "&#xF10B;");
        t = t.replaceAll("&gins;", "&#xF10F;");
        t = t.replaceAll("&slongbarslash;", "&#xF14F;");
        t = t.replaceAll("&thornbarslash;", "&#xF149;");
        return t;
    }
}
