package cu.edu.cujae.biowh.gui.protfam;

import cu.edu.cujae.biowh.BioWH2App;
import cu.edu.cujae.biowh.gui.component.table.model.ListTableModel;
import cu.edu.cujae.biowh.gui.protein.ProteinView;
import cu.edu.cujae.biowh.parser.protfam.entities.UniRefEntry;
import cu.edu.cujae.biowh.parser.protfam.entities.UniRefEntryProperty;
import cu.edu.cujae.biowh.parser.protfam.entities.UniRefMember;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import org.jdesktop.application.Action;

/**
 * This Dialog is
 * @author rvera
 * @version 1.0
 * @since Sep 1, 2011
 */
public class UniRefEntryView extends javax.swing.JDialog {

    /** Creates new form UniRefEntryView
     * @param parent
     * @param modal
     * @param uniRefEntry
     */
    public UniRefEntryView(java.awt.Frame parent, boolean modal, UniRefEntry uniRefEntry) {
        super(parent, modal);
        mainFrame = BioWH2App.getApplication().getMainFrame();
        this.uniRefEntry = uniRefEntry;
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLUniRefID = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLName = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLComTax = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLMemberCount = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTRepresMember = new javax.swing.JTable();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTMember = new javax.swing.JTable();
        jBClose = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(cu.edu.cujae.biowh.BioWH2App.class).getContext().getResourceMap(UniRefEntryView.class);
        setTitle(resourceMap.getString("Form.title")); // NOI18N
        setName("Form"); // NOI18N

        jLabel1.setText(resourceMap.getString("jLabel1.text")); // NOI18N
        jLabel1.setName("jLabel1"); // NOI18N

        jLUniRefID.setText(uniRefEntry.getId());
        jLUniRefID.setName("jLUniRefID"); // NOI18N

        jLabel2.setText(resourceMap.getString("jLabel2.text")); // NOI18N
        jLabel2.setName("jLabel2"); // NOI18N

        jLName.setText(uniRefEntry.getName());
        jLName.setName("jLName"); // NOI18N

        jLabel3.setText(resourceMap.getString("jLabel3.text")); // NOI18N
        jLabel3.setName("jLabel3"); // NOI18N

        jLComTax.setName("jLComTax"); // NOI18N
        if (uniRefEntry.getUniRefEntryProperty() != null) {
            for (UniRefEntryProperty uniRefEntryProperty : uniRefEntry.getUniRefEntryProperty()) {
                if (uniRefEntryProperty.getType().equalsIgnoreCase("common taxon")) {
                    jLComTax.setText(uniRefEntryProperty.getValue());
                }
            }
        }

        jLabel4.setText(resourceMap.getString("jLabel4.text")); // NOI18N
        jLabel4.setName("jLabel4"); // NOI18N

        jLMemberCount.setText(resourceMap.getString("jLMemberCount.text")); // NOI18N
        jLMemberCount.setName("jLMemberCount"); // NOI18N

        jScrollPane1.setName("jScrollPane1"); // NOI18N

        String[] represMemberColumn = null;
        String[] uniRefMemberColumn = null;
        ArrayList<List<Object>> arrayList1 = new ArrayList<>();
        ArrayList<List<Object>> arrayList2 = new ArrayList<>();
        if (uniRefEntry.getUniRefMember() != null) {
            jLMemberCount.setText(new Integer(uniRefEntry.getUniRefMember().size()).toString());
            for (UniRefMember uniRefMember : uniRefEntry.getUniRefMember()) {
                if (uniRefMember.getIsRepresentative()) {
                    ArrayList<Object> list = new ArrayList<>();
                    if (uniRefMember.getTaxonomy() != null) {
                        list.add(uniRefMember.getTaxonomy().getTaxonomySynonym("scientific name"));
                    } else {
                        list.add(uniRefMember.getTaxId());
                    }
                    list.add(uniRefMember.getType());
                    list.add(uniRefMember.getId());
                    arrayList1.add(list);
                } else {
                    ArrayList<Object> list = new ArrayList<>();
                    if (uniRefMember.getTaxonomy() != null) {
                        list.add(uniRefMember.getTaxonomy().getTaxonomySynonym("scientific name"));
                    } else {
                        list.add(uniRefMember.getTaxId());
                    }
                    list.add(uniRefMember.getType());
                    list.add(uniRefMember.getId());
                    arrayList2.add(list);
                }
            }
            represMemberColumn = new String[]{"Taxonomy", "Type", "Id"};
            uniRefMemberColumn = new String[]{"Taxonomy", "Type", "Id"};
        } else {
            jLMemberCount.setText("0");
        }
        jTRepresMember.setModel(new ListTableModel(represMemberColumn, arrayList1,
            new Class[]{java.lang.Object.class, java.lang.Object.class, java.lang.Object.class},
            new boolean[]{false, false, false}));
    jTRepresMember.setFillsViewportHeight(true);
    jTRepresMember.setGridColor(new java.awt.Color(204, 204, 204));
    jTRepresMember.setName("jTRepresMember"); // NOI18N
    jTRepresMember.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jTRepresMemberMouseClicked(evt);
        }
    });
    jScrollPane1.setViewportView(jTRepresMember);

    jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
    jLabel5.setText(resourceMap.getString("jLabel5.text")); // NOI18N
    jLabel5.setName("jLabel5"); // NOI18N

    jLabel6.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
    jLabel6.setText(resourceMap.getString("jLabel6.text")); // NOI18N
    jLabel6.setName("jLabel6"); // NOI18N

    jScrollPane2.setName("jScrollPane2"); // NOI18N

    jTMember.setModel(new ListTableModel(uniRefMemberColumn, arrayList2,
        new Class[]{java.lang.Object.class, java.lang.Object.class, java.lang.Object.class},
        new boolean[]{false, false, false}));
jTMember.setFillsViewportHeight(true);
jTMember.setGridColor(new java.awt.Color(204, 204, 204));
jTMember.setName("jTMember"); // NOI18N
jTMember.addMouseListener(new java.awt.event.MouseAdapter() {
    public void mouseClicked(java.awt.event.MouseEvent evt) {
        jTMemberMouseClicked(evt);
    }
    });
    jScrollPane2.setViewportView(jTMember);

    javax.swing.ActionMap actionMap = org.jdesktop.application.Application.getInstance(cu.edu.cujae.biowh.BioWH2App.class).getContext().getActionMap(UniRefEntryView.class, this);
    jBClose.setAction(actionMap.get("close")); // NOI18N
    jBClose.setText(resourceMap.getString("jBClose.text")); // NOI18N
    jBClose.setName("jBClose"); // NOI18N

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jLabel1)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(jLUniRefID, javax.swing.GroupLayout.PREFERRED_SIZE, 166, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jLabel2)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(jLName, javax.swing.GroupLayout.PREFERRED_SIZE, 343, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jLabel3)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(jLComTax, javax.swing.GroupLayout.PREFERRED_SIZE, 276, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jLabel4)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(jLMemberCount, javax.swing.GroupLayout.PREFERRED_SIZE, 144, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addComponent(jLabel5, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
                .addComponent(jLabel6, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
                .addComponent(jBClose, javax.swing.GroupLayout.Alignment.TRAILING))
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel1)
                .addComponent(jLUniRefID))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel2)
                .addComponent(jLName, javax.swing.GroupLayout.PREFERRED_SIZE, 14, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel3)
                .addComponent(jLComTax))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel4)
                .addComponent(jLMemberCount))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jLabel5)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jLabel6)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 367, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jBClose)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );

    pack();
    }// </editor-fold>//GEN-END:initComponents

private void jTRepresMemberMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTRepresMemberMouseClicked
    for (UniRefMember uniRefMember : uniRefEntry.getUniRefMember()) {
        if (uniRefMember.getId().equals(jTRepresMember.getValueAt(jTRepresMember.getSelectedRow(), 2))) {
            if (uniRefMember.getProtein() != null) {
                ProteinView view = new ProteinView(mainFrame, true, uniRefMember.getProtein());
                view.toFront();
                view.setVisible(true);
            }
            break;
        }
    }
}//GEN-LAST:event_jTRepresMemberMouseClicked

private void jTMemberMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTMemberMouseClicked
    for (UniRefMember uniRefMember : uniRefEntry.getUniRefMember()) {
        if (uniRefMember.getId().equals(jTMember.getValueAt(jTMember.getSelectedRow(), 2))) {
            if (uniRefMember.getProtein() != null) {
                ProteinView view = new ProteinView(mainFrame, true, uniRefMember.getProtein());
                view.toFront();
                view.setVisible(true);
            }
            break;
        }
    }
}//GEN-LAST:event_jTMemberMouseClicked

    /**
     * Close the Dialog
     */
    @Action
    public void close() {
        dispose();
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jBClose;
    private javax.swing.JLabel jLComTax;
    private javax.swing.JLabel jLMemberCount;
    private javax.swing.JLabel jLName;
    private javax.swing.JLabel jLUniRefID;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTable jTMember;
    private javax.swing.JTable jTRepresMember;
    // End of variables declaration//GEN-END:variables
    private UniRefEntry uniRefEntry;
    private JFrame mainFrame;
}
