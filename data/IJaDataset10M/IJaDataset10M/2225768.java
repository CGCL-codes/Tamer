package carrancao.gui;

import carrancao.controlador.Fachada;
import carrancao.entidades.Usuario;
import carrancao.exception.CadastrarUsuarioException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;

/**
 *
 * @author Lubnnia
 */
public class UsuarioGUI extends javax.swing.JFrame {

    /** Creates new form UsuarioGUI */
    public UsuarioGUI() {
        initComponents();
        setLocationRelativeTo(null);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {
        buttonGroupPerfil = new javax.swing.ButtonGroup();
        jLabelNomeUsuario = new javax.swing.JLabel();
        jTextFieldNome = new javax.swing.JTextField();
        jLabelEmail = new javax.swing.JLabel();
        jTextFieldEmail = new javax.swing.JTextField();
        jLabelCPF = new javax.swing.JLabel();
        jFormattedTextFieldCPF = new javax.swing.JFormattedTextField();
        jLabelRG = new javax.swing.JLabel();
        jFormattedTextFieldRG = new javax.swing.JFormattedTextField();
        jLabelCarteiraTrabalho = new javax.swing.JLabel();
        jLabelTelefone = new javax.swing.JLabel();
        jFormattedTextFieldTelefone = new javax.swing.JFormattedTextField();
        jLabelCelular = new javax.swing.JLabel();
        jFormattedTextFieldCelular = new javax.swing.JFormattedTextField();
        jLabelLogin = new javax.swing.JLabel();
        jTextFieldLogin = new javax.swing.JTextField();
        jLabelSenha = new javax.swing.JLabel();
        jPasswordFieldSenha = new javax.swing.JPasswordField();
        jLabelCargo = new javax.swing.JLabel();
        jTextFieldCargo = new javax.swing.JTextField();
        jLabelPerfil = new javax.swing.JLabel();
        jButtonSalvar = new javax.swing.JButton();
        jButtonFechar = new javax.swing.JButton();
        jComboBoxPerfil = new javax.swing.JComboBox();
        jTextFieldNumCarteira = new javax.swing.JTextField();
        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Cadastro de Usuário");
        setResizable(false);
        jLabelNomeUsuario.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelNomeUsuario.setText("Nome do Usuário:");
        jTextFieldNome.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelEmail.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelEmail.setText("Email:");
        jTextFieldEmail.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelCPF.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelCPF.setText("CPF:");
        try {
            jFormattedTextFieldCPF.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("###.###.###-##")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFormattedTextFieldCPF.setFocusLostBehavior(javax.swing.JFormattedTextField.PERSIST);
        jFormattedTextFieldCPF.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelRG.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelRG.setText("RG:");
        try {
            jFormattedTextFieldRG.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("#.###.###")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFormattedTextFieldRG.setFocusLostBehavior(javax.swing.JFormattedTextField.PERSIST);
        jFormattedTextFieldRG.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelCarteiraTrabalho.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelCarteiraTrabalho.setText("Nº Carteira de Trabalho:");
        jLabelTelefone.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelTelefone.setText("Telefone Residencial:");
        try {
            jFormattedTextFieldTelefone.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("(##) #### - ####")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFormattedTextFieldTelefone.setFocusLostBehavior(javax.swing.JFormattedTextField.PERSIST);
        jFormattedTextFieldTelefone.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelCelular.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelCelular.setText("Celular:");
        try {
            jFormattedTextFieldCelular.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("(##) #### - ####")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        jFormattedTextFieldCelular.setFocusLostBehavior(javax.swing.JFormattedTextField.PERSIST);
        jFormattedTextFieldCelular.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelLogin.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelLogin.setText("Login:");
        jTextFieldLogin.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelSenha.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelSenha.setText("Senha:");
        jPasswordFieldSenha.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelCargo.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelCargo.setText("Cargo:");
        jLabelPerfil.setFont(new java.awt.Font("Tahoma", 0, 12));
        jLabelPerfil.setText("Perfil do Usuário:");
        jButtonSalvar.setFont(new java.awt.Font("Tahoma", 0, 12));
        jButtonSalvar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/carrancao/imagens/icon_ok.png")));
        jButtonSalvar.setText("Salvar");
        jButtonSalvar.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSalvarActionPerformed(evt);
            }
        });
        jButtonFechar.setFont(new java.awt.Font("Tahoma", 0, 12));
        jButtonFechar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/carrancao/imagens/icon_close.png")));
        jButtonFechar.setText("Fechar");
        jButtonFechar.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonFecharActionPerformed(evt);
            }
        });
        jComboBoxPerfil.setFont(new java.awt.Font("Tahoma", 0, 12));
        jComboBoxPerfil.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "ADMINISTRADOR", "VENDEDOR" }));
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addContainerGap().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addComponent(jLabelNomeUsuario).addGap(384, 384, 384).addComponent(jLabelEmail)).addGroup(layout.createSequentialGroup().addComponent(jLabelCPF).addGap(118, 118, 118).addComponent(jLabelRG).addGap(102, 102, 102).addComponent(jLabelCarteiraTrabalho).addGap(86, 86, 86).addComponent(jLabelTelefone).addGap(18, 18, 18).addComponent(jLabelCelular)).addGroup(layout.createSequentialGroup().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addComponent(jFormattedTextFieldCPF, javax.swing.GroupLayout.PREFERRED_SIZE, 126, javax.swing.GroupLayout.PREFERRED_SIZE).addGap(16, 16, 16).addComponent(jFormattedTextFieldRG, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE)).addGroup(layout.createSequentialGroup().addComponent(jLabelLogin).addGap(109, 109, 109).addComponent(jLabelSenha))).addGap(18, 18, 18).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jLabelCargo).addGroup(layout.createSequentialGroup().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING).addComponent(jButtonSalvar, javax.swing.GroupLayout.PREFERRED_SIZE, 107, javax.swing.GroupLayout.PREFERRED_SIZE).addGroup(layout.createSequentialGroup().addComponent(jTextFieldNumCarteira, javax.swing.GroupLayout.PREFERRED_SIZE, 200, javax.swing.GroupLayout.PREFERRED_SIZE).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 18, Short.MAX_VALUE).addComponent(jFormattedTextFieldTelefone, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE))).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addGap(18, 18, 18).addComponent(jFormattedTextFieldCelular, javax.swing.GroupLayout.DEFAULT_SIZE, 114, Short.MAX_VALUE)).addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup().addGap(25, 25, 25).addComponent(jButtonFechar, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE)))))).addGroup(layout.createSequentialGroup().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false).addComponent(jTextFieldNome, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 463, javax.swing.GroupLayout.PREFERRED_SIZE).addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup().addComponent(jTextFieldLogin, javax.swing.GroupLayout.PREFERRED_SIZE, 126, javax.swing.GroupLayout.PREFERRED_SIZE).addGap(16, 16, 16).addComponent(jPasswordFieldSenha, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE).addGap(18, 18, 18).addComponent(jTextFieldCargo))).addGap(18, 18, 18).addComponent(jTextFieldEmail, javax.swing.GroupLayout.DEFAULT_SIZE, 247, Short.MAX_VALUE)).addComponent(jComboBoxPerfil, javax.swing.GroupLayout.PREFERRED_SIZE, 143, javax.swing.GroupLayout.PREFERRED_SIZE).addComponent(jLabelPerfil)).addContainerGap()));
        layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] { jButtonFechar, jButtonSalvar });
        layout.setVerticalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addContainerGap().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jLabelNomeUsuario).addComponent(jLabelEmail)).addGap(6, 6, 6).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jTextFieldNome, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addComponent(jTextFieldEmail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addGap(11, 11, 11).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jLabelCPF).addComponent(jLabelRG).addComponent(jLabelCarteiraTrabalho).addComponent(jLabelTelefone).addComponent(jLabelCelular)).addGap(6, 6, 6).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jFormattedTextFieldCPF, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE).addComponent(jFormattedTextFieldRG, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addComponent(jTextFieldNumCarteira, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addComponent(jFormattedTextFieldTelefone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addGap(11, 11, 11).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jLabelLogin).addComponent(jLabelSenha)).addGap(6, 6, 6).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jTextFieldLogin, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE).addComponent(jPasswordFieldSenha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addComponent(jTextFieldCargo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))).addComponent(jLabelCargo)).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED).addComponent(jLabelPerfil).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED).addComponent(jComboBoxPerfil, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addComponent(jFormattedTextFieldCelular, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addGap(35, 35, 35).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE).addComponent(jButtonFechar).addComponent(jButtonSalvar)).addContainerGap(22, Short.MAX_VALUE)));
        layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] { jButtonSalvar, jComboBoxPerfil, jFormattedTextFieldCPF, jFormattedTextFieldCelular, jFormattedTextFieldRG, jFormattedTextFieldTelefone, jPasswordFieldSenha, jTextFieldCargo, jTextFieldEmail, jTextFieldLogin, jTextFieldNome, jTextFieldNumCarteira });
        pack();
    }

    private void limparCampos() {
        jTextFieldNome.setText("");
        jTextFieldEmail.setText("");
        jTextFieldCargo.setText("");
        jTextFieldLogin.setText("");
        jFormattedTextFieldCPF.setText("");
        jTextFieldNumCarteira.setText("");
        jFormattedTextFieldCelular.setText("");
        jFormattedTextFieldRG.setText("");
        jFormattedTextFieldTelefone.setText("");
        jPasswordFieldSenha.setText("");
        jComboBoxPerfil.setSelectedItem("Administrador");
    }

    private void jButtonFecharActionPerformed(java.awt.event.ActionEvent evt) {
        dispose();
    }

    private void jButtonSalvarActionPerformed(java.awt.event.ActionEvent evt) {
        try {
            if (validarCampos()) {
                String nomeUsuarioAux = jTextFieldNome.getText().toUpperCase();
                String emailAux = jTextFieldEmail.getText().toUpperCase();
                String cargoAux = jTextFieldCargo.getText().toUpperCase();
                String loginAux = jTextFieldLogin.getText().toUpperCase();
                String cpfAux = jFormattedTextFieldCPF.getText();
                String rgAux = jFormattedTextFieldRG.getText();
                String carteiraAux = jTextFieldNumCarteira.getText();
                String celularAux = jFormattedTextFieldCelular.getText();
                String telefoneAux = jFormattedTextFieldTelefone.getText();
                String senhaAux = jPasswordFieldSenha.getText();
                String tipoAux = (String) jComboBoxPerfil.getSelectedItem();
                Usuario usuario = new Usuario(nomeUsuarioAux, loginAux, senhaAux, emailAux, tipoAux, cargoAux, telefoneAux, celularAux, cpfAux, rgAux, carteiraAux, "ATIVO");
                Fachada.getInstance().getUsuarioControl().cadastrarUsuario(usuario);
                limparCampos();
            }
        } catch (CadastrarUsuarioException ex) {
            Logger.getLogger(UsuarioGUI.class.getName()).log(Level.SEVERE, null, ex);
        } catch (NumberFormatException nfe) {
            JOptionPane.showMessageDialog(null, "Digite um número.", "Carrancão Hamburgueria", JOptionPane.ERROR_MESSAGE);
        }
    }

    /**
    * @param args the command line arguments
    */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new UsuarioGUI().setVisible(true);
            }
        });
    }

    private javax.swing.ButtonGroup buttonGroupPerfil;

    private javax.swing.JButton jButtonFechar;

    private javax.swing.JButton jButtonSalvar;

    private javax.swing.JComboBox jComboBoxPerfil;

    private javax.swing.JFormattedTextField jFormattedTextFieldCPF;

    private javax.swing.JFormattedTextField jFormattedTextFieldCelular;

    private javax.swing.JFormattedTextField jFormattedTextFieldRG;

    private javax.swing.JFormattedTextField jFormattedTextFieldTelefone;

    private javax.swing.JLabel jLabelCPF;

    private javax.swing.JLabel jLabelCargo;

    private javax.swing.JLabel jLabelCarteiraTrabalho;

    private javax.swing.JLabel jLabelCelular;

    private javax.swing.JLabel jLabelEmail;

    private javax.swing.JLabel jLabelLogin;

    private javax.swing.JLabel jLabelNomeUsuario;

    private javax.swing.JLabel jLabelPerfil;

    private javax.swing.JLabel jLabelRG;

    private javax.swing.JLabel jLabelSenha;

    private javax.swing.JLabel jLabelTelefone;

    private javax.swing.JPasswordField jPasswordFieldSenha;

    private javax.swing.JTextField jTextFieldCargo;

    private javax.swing.JTextField jTextFieldEmail;

    private javax.swing.JTextField jTextFieldLogin;

    private javax.swing.JTextField jTextFieldNome;

    private javax.swing.JTextField jTextFieldNumCarteira;

    private boolean validarCampos() {
        boolean resultado = true;
        if (jTextFieldNome.getText().equals("") || jTextFieldNome.getText().length() < 3) {
            JOptionPane.showMessageDialog(null, "Preencha o campo NOME e coloque mais de 3 caracteres.", "Carrancão Hamburgueria", JOptionPane.WARNING_MESSAGE);
            jTextFieldNome.requestFocus();
            resultado = false;
        } else if (jTextFieldLogin.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Preencha o campo LOGIN corretamente.", "Carrancão Hamburgueria", JOptionPane.WARNING_MESSAGE);
            jTextFieldLogin.requestFocus();
            resultado = false;
        } else if (jPasswordFieldSenha.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Preencha o campo SENHA corretamente.", "Carrancão Hamburgueria", JOptionPane.WARNING_MESSAGE);
            jPasswordFieldSenha.requestFocus();
            resultado = false;
        }
        return resultado;
    }
}
