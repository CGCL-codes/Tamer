package zpm;

import java.awt.Component;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import org.jdesktop.application.Action;

/**
 *
 * @author Przemyslaw Kupisz
 */
public class Sjdbc extends javax.swing.JDialog {

    private Component frame;

    /** Creates new form Sjdbc */
    public Sjdbc(java.awt.Frame parent) {
        super(parent);
        initComponents();
    }

    @Action
    public void closeSjdbc() {
        dispose();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jPass_txt = new javax.swing.JPasswordField();
        jText_IP = new javax.swing.JTextField();
        jText_DB = new javax.swing.JTextField();
        jText_User = new javax.swing.JTextField();
        jLabel6 = new javax.swing.JLabel();
        Cancel = new javax.swing.JButton();
        jText_Port = new javax.swing.JTextField();
        Connect = new javax.swing.JButton();
        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setName("LSjdbc");
        org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(zpm.ZpmApp.class).getContext().getResourceMap(Sjdbc.class);
        jLabel2.setText(resourceMap.getString("jLabel2.text"));
        jLabel2.setName("jLabel2");
        jLabel3.setText(resourceMap.getString("jLabel3.text"));
        jLabel3.setName("jLabel3");
        jLabel4.setText(resourceMap.getString("jLabel4.text"));
        jLabel4.setName("jLabel4");
        jLabel5.setText(resourceMap.getString("jLabel5.text"));
        jLabel5.setName("jLabel5");
        jPass_txt.setName("jPass_txt");
        jText_IP.setText(resourceMap.getString("jText_IP.text"));
        jText_IP.setName("jText_IP");
        jText_DB.setText(resourceMap.getString("jText_DB.text"));
        jText_DB.setName("jText_DB");
        jText_User.setText(resourceMap.getString("jText_User.text"));
        jText_User.setName("jText_User");
        jLabel6.setText(resourceMap.getString("jLabel6.text"));
        jLabel6.setName("jLabel6");
        Cancel.setText(resourceMap.getString("Cancel.text"));
        Cancel.setName("Cancel");
        Cancel.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                CancelActionPerformed(evt);
            }
        });
        jText_Port.setText(resourceMap.getString("jText_Port.text"));
        jText_Port.setName("jText_Port");
        Connect.setText(resourceMap.getString("Connect.text"));
        Connect.setName("Connect");
        Connect.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ConnectActionPerformed(evt);
            }
        });
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addContainerGap().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false).addGroup(layout.createSequentialGroup().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jLabel4).addComponent(jLabel5)).addGap(198, 198, 198).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false).addComponent(jPass_txt).addComponent(jText_User, javax.swing.GroupLayout.DEFAULT_SIZE, 174, Short.MAX_VALUE).addComponent(jText_DB))).addGroup(layout.createSequentialGroup().addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 258, javax.swing.GroupLayout.PREFERRED_SIZE).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED).addComponent(jText_IP))).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addGap(9, 9, 9).addComponent(jLabel6).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED).addComponent(jText_Port, javax.swing.GroupLayout.DEFAULT_SIZE, 95, Short.MAX_VALUE)).addGroup(layout.createSequentialGroup().addGap(54, 54, 54).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false).addComponent(Cancel, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE).addComponent(Connect, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))).addContainerGap()).addGroup(layout.createSequentialGroup().addComponent(jLabel3, javax.swing.GroupLayout.DEFAULT_SIZE, 122, Short.MAX_VALUE).addGap(480, 480, 480)))));
        layout.setVerticalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addGap(46, 46, 46).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE).addComponent(jLabel2).addComponent(jText_Port, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addComponent(jLabel6).addComponent(jText_IP, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addGap(1, 1, 1).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addGap(1, 1, 1).addComponent(jText_DB, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED).addComponent(jText_User, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addGroup(layout.createSequentialGroup().addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED).addComponent(jLabel3).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED).addComponent(jLabel4).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE).addComponent(jLabel5).addComponent(jPass_txt, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addComponent(Connect)))).addGap(18, 18, 18).addComponent(Cancel).addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)));
        pack();
    }

    private void CancelActionPerformed(java.awt.event.ActionEvent evt) {
        closeSjdbc();
    }

    private void ConnectActionPerformed(java.awt.event.ActionEvent evt) {
        boolean stop = true;
        try {
            ZpmApp.ip = jText_IP.getText();
            ZpmApp.port = jText_Port.getText();
            ZpmApp.dbname = jText_DB.getText();
            ZpmApp.user = jText_User.getText();
            ZpmApp.passwd = new String(jPass_txt.getPassword());
            JDBCinit dbc = new JDBCinit();
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(Sjdbc.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(frame, ex, "JDBC ClassNotFoundException", JOptionPane.ERROR_MESSAGE);
            stop = false;
        } catch (InstantiationException ex) {
            Logger.getLogger(Sjdbc.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(frame, ex, "JDBC InstantiationException", JOptionPane.ERROR_MESSAGE);
            stop = false;
        } catch (IllegalAccessException ex) {
            Logger.getLogger(Sjdbc.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(frame, ex, "JDBC IllegalAccessException", JOptionPane.ERROR_MESSAGE);
            stop = false;
        } catch (SQLException ex) {
            Logger.getLogger(Sjdbc.class.getName()).log(Level.SEVERE, null, ex);
            JOptionPane.showMessageDialog(frame, ex, "JDBC SQLException", JOptionPane.ERROR_MESSAGE);
            stop = false;
        }
        if (stop == true) {
            ZpmView.jTabbedPane1.setEnabled(true);
            ZpmView.eDBConn.setEnabled(true);
            ZpmView.sDBConn.setEnabled(false);
            ZpmView.jMenu1.setEnabled(true);
            ZpmView.jMenu2.setEnabled(true);
            ZpmView.jMenu3.setEnabled(true);
            closeSjdbc();
        }
    }

    private javax.swing.JButton Cancel;

    private javax.swing.JButton Connect;

    private javax.swing.JLabel jLabel2;

    private javax.swing.JLabel jLabel3;

    private javax.swing.JLabel jLabel4;

    private javax.swing.JLabel jLabel5;

    private javax.swing.JLabel jLabel6;

    private javax.swing.JPasswordField jPass_txt;

    private javax.swing.JTextField jText_DB;

    private javax.swing.JTextField jText_IP;

    private javax.swing.JTextField jText_Port;

    private javax.swing.JTextField jText_User;
}
