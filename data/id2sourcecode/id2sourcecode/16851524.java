    public static void encode(String packageName, String className, InputStream in, Appendable out) throws IOException {
        ByteArrayOutputStream baos;
        OutputStream os = new GZIPOutputStream(baos = new ByteArrayOutputStream());
        byte[] buf = new byte[1024];
        while (true) {
            int numread = in.read(buf, 0, buf.length);
            if (numread == -1) break;
            os.write(buf, 0, numread);
        }
        os.close();
        buf = baos.toByteArray();
        out.append("// generated by " + Encode.class.getName() + "\n\n");
        out.append("package " + packageName + ";\n\n");
        out.append("public class " + className + " {\n");
        out.append("    public static final String data = \n");
        for (int pos = 0; pos < buf.length; ) {
            out.append("        \"");
            for (int i = 0; i < LINE_LENGTH && pos < buf.length; i++) {
                String cs = Integer.toOctalString(buf[pos++] & 0xff);
                while (cs.length() < 3) cs = "0" + cs;
                out.append("\\" + cs);
            }
            out.append("\" +\n");
        }
        out.append("    \"\";\n");
        out.append("}\n");
    }
