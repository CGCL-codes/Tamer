    private void runShortTest(Output write) throws IOException {
        write.writeShort(0);
        write.writeShort(63);
        write.writeShort(64);
        write.writeShort(127);
        write.writeShort(128);
        write.writeShort(8192);
        write.writeShort(16384);
        write.writeShort(32767);
        write.writeShort(-63);
        write.writeShort(-64);
        write.writeShort(-127);
        write.writeShort(-128);
        write.writeShort(-8192);
        write.writeShort(-16384);
        write.writeShort(-32768);
        assertEquals(1, write.writeShort(0, true));
        assertEquals(1, write.writeShort(0, false));
        assertEquals(1, write.writeShort(63, true));
        assertEquals(1, write.writeShort(63, false));
        assertEquals(1, write.writeShort(64, true));
        assertEquals(1, write.writeShort(64, false));
        assertEquals(1, write.writeShort(127, true));
        assertEquals(1, write.writeShort(127, false));
        assertEquals(1, write.writeShort(128, true));
        assertEquals(3, write.writeShort(128, false));
        assertEquals(3, write.writeShort(8191, true));
        assertEquals(3, write.writeShort(8191, false));
        assertEquals(3, write.writeShort(8192, true));
        assertEquals(3, write.writeShort(8192, false));
        assertEquals(3, write.writeShort(16383, true));
        assertEquals(3, write.writeShort(16383, false));
        assertEquals(3, write.writeShort(16384, true));
        assertEquals(3, write.writeShort(16384, false));
        assertEquals(3, write.writeShort(32767, true));
        assertEquals(3, write.writeShort(32767, false));
        assertEquals(1, write.writeShort(-64, false));
        assertEquals(3, write.writeShort(-64, true));
        assertEquals(1, write.writeShort(-65, false));
        assertEquals(3, write.writeShort(-65, true));
        assertEquals(3, write.writeShort(-8192, false));
        assertEquals(3, write.writeShort(-8192, true));
        Input read = new Input(write.toBytes());
        assertEquals(0, read.readShort());
        assertEquals(63, read.readShort());
        assertEquals(64, read.readShort());
        assertEquals(127, read.readShort());
        assertEquals(128, read.readShort());
        assertEquals(8192, read.readShort());
        assertEquals(16384, read.readShort());
        assertEquals(32767, read.readShort());
        assertEquals(-63, read.readShort());
        assertEquals(-64, read.readShort());
        assertEquals(-127, read.readShort());
        assertEquals(-128, read.readShort());
        assertEquals(-8192, read.readShort());
        assertEquals(-16384, read.readShort());
        assertEquals(-32768, read.readShort());
        assertEquals(0, read.readShort(true));
        assertEquals(0, read.readShort(false));
        assertEquals(63, read.readShort(true));
        assertEquals(63, read.readShort(false));
        assertEquals(64, read.readShort(true));
        assertEquals(64, read.readShort(false));
        assertEquals(127, read.readShort(true));
        assertEquals(127, read.readShort(false));
        assertEquals(128, read.readShort(true));
        assertEquals(128, read.readShort(false));
        assertEquals(8191, read.readShort(true));
        assertEquals(8191, read.readShort(false));
        assertEquals(8192, read.readShort(true));
        assertEquals(8192, read.readShort(false));
        assertEquals(16383, read.readShort(true));
        assertEquals(16383, read.readShort(false));
        assertEquals(16384, read.readShort(true));
        assertEquals(16384, read.readShort(false));
        assertEquals(32767, read.readShort(true));
        assertEquals(32767, read.readShort(false));
        assertEquals(-64, read.readShort(false));
        assertEquals(-64, read.readShort(true));
        assertEquals(-65, read.readShort(false));
        assertEquals(-65, read.readShort(true));
        assertEquals(-8192, read.readShort(false));
        assertEquals(-8192, read.readShort(true));
    }
